<!doctype html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>Sharing in Social Network</title>
    <link rel="stylesheet" href="./assets/css/style.css">
    <link rel="stylesheet" href="css/templete.css" type="text/css" media="all" />
    <meta charset="UTF-8">
</head>
<body class="level-2">
    <div class="wrapper">
        <!--Begin header-->
        <div class="header">
            <div class="grid-container clearfix">
                <div class="header-left">
                    <img alt="Microsoft" src="http://i.s-microsoft.com/global/ImageStore/PublishingImages/logos/hp/logo-lg-1x.png" width="94" height="20">
                    <h1>X-Platform</h1>
                </div>
                <div id="mscom-search" class="mscom-search" style="margin-top: 37px;">
                    <div class="search-form">
                        <form action="" id="search-form">
                            <div class="input-wrapper">
                                <label class="screen-reader-text" for="search-input">搜索 Microsoft.com</label>
                                <input id="search-input" type="text" class="input-area" autocomplete="off">
                            </div>
                            <button class="search-submit" id="search-btn" type="submit">
                                <img width="16" height="16" alt="Submit" src="http://i.s-microsoft.com/global/imagestore/PublishingImages/sprites/search-button-blue.png"></button>
                        </form>
                    </div>
                    <div class="search-results-box" id="results">
                        <div class="search-scope">
                            <ul>
                                <li class=""><a class="checked" search="microsoft" role="search">搜索 Microsoft.com</a></li>
                                <li class=""><a search="internet" role="search">搜索互联网</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--End header-->
        <br />
        <!--Begin Content-->
        <div class="content">
            <div class="wrapper">
                <div class="wrapper-header">
                    <div>
                        <a href="index.html">
                            <img src="./assets/image/banner_1.jpg"></a>
                    </div>
                </div>
                <div class="main">
                    <div class="nav">
                        <div class="block article-nav-block">
                            <h2>移动应用开发生命周期</h2>
                            <div class="menu">
                                <h3><a href="idea.html">计划<span>Idea/Planning</span></a></h3>
                                <ul>
                                    <li><a href="idea_01.html">平台总览</a></li>
                                    <li><a href="idea_02.html">开发工具、开发环境和模拟器</a></li>
                                    <li><a href="idea_03.html">应用结构和生命周期</a></li>
                                </ul>
                            </div>
                            <div class="menu">
                                <h3><a href="design.html">设计<span>Design</span></a></h3>
                                <ul>
                                    <li><a href="design_01.html">UI Layout的设计</a></li>
                                    <li><a href="design_02.html">UI的控件</a></li>
                                    <li><a href="design_03.html">UI页面的控制和导航</a></li>
                                    <li><a href="design_04.html">不同屏幕尺寸和分辨率的适配</a></li>
                                    <li><a href="design_05.html">第三方SDK</a></li>
                                    <li><a href="design_06.html">游戏开发</a></li>
                                </ul>
                            </div>
                            <div class="menu active">
                                <h3><a href="developing.html">开发<span>Developing</span></a></h3>
                                <ul>
                                    <li><a href="developing_01.html">开发语言</a></li>
                                    <li><a href="developing_02.html">Audio、Video Player应用的开发</a></li>
                                    <li><a href="developing_03.html">General APIs Mapping</a></li>
                                    <li><a href="developing_04.html">IAP应用内支付</a></li>
                                    <li><a href="developing_05.html">LBS应用</a></li>
                                    <li><a href="developing_06.html">LBS、镜头和传感器应用接口使用</a></li>
                                    <li><a href="developing_07.html">Native Code（C和C++）支持</a></li>
                                    <li><a href="developing_08.html">Push Notification</a></li>
                                    <li><a href="developing_09.html">Sharing in Social Network</a></li>
                                    <li><a href="developing_10.html">Source Code Control</a></li>
                                    <li><a href="developing_11.html">UI上的Data Binding</a></li>
                                    <li><a href="developing_12.html">Windows 8.1和WP 8 Sharing应用分享功能实现</a></li>
                                    <li><a href="developing_13.html">多媒体</a></li>
                                    <li><a href="developing_14.html">后台任务和多任务处理</a></li>
                                    <li><a href="developing_15.html">获取后台服务器数据</a></li>
                                    <li><a href="developing_16.html">浏览器控件WebView</a></li>
                                    <li><a href="developing_17.html">数据库（SQLite）</a></li>
                                    <li><a href="developing_18.html">数据网络和数据通讯</a></li>
                                    <li><a href="developing_19.html">通话和短信功能</a></li>
                                    <li><a href="developing_20.html">图形处理(Drawing & Animation)</a></li>
                                    <li><a href="developing_21.html">文件系统和应用设置</a></li>
                                    <li><a href="developing_22.html">应用间通信</a></li>
                                    <li><a href="developing_23.html">支付方式</a></li>
                                    <li><a href="developing_24.html">Windows 8.1应用外设开发</a></li>
                                </ul>
                            </div>
                            <div class="menu">
                                <h3><a href="testing.html">测试<span>Testing</span></a></h3>
                                <ul>
                                    <li><a href="testing_01.html">Windows 8 and WP 8开发FAQ</a></li>
                                </ul>
                            </div>
                            <div class="menu last">
                                <h3><a href="distribute.html">发布<span>Distribute</span></a></h3>
                                <ul>
                                    <li><a href="distribute_01.html">应用商店(发布和更新应用)</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="block success-story-nav-block">
                            <h2>成功案例</h2>
                        </div>
                        <div class="block others">
                            <a href="sample_code.html" class="left">示例代码</a>
                            <a href="http://msdn.microsoft.com/zh-cn/dn473954" class="right">教学视频</a>
                        </div>
                    </div>
                    <div class="content">
                        <h3 class="title">Sharing in social network<span><a href="index.html">返回首页&gt;</a></span></h3>
                        <div class="article-content">
                            <div class="WordSection1">
                                <p class="MsoToc1"><a href="#_Toc372634634">概述</a></p>
                                <p class="MsoToc1"><a href="#_Toc372634635">不同平台横向比较</a></p>
                                <p class="MsoToc1"><a href="#_Toc372634636">共享文本内容</a></p>
                                <p class="MsoToc2"><a href="#_Toc372634637">Windows phone</a></p>
                                <p class="MsoToc2"><a href="#_Toc372634638">Windows 8</a></p>
                                <p class="MsoToc2"><a href="#_Toc372634639">Android</a></p>
                                <p class="MsoToc1"><a href="#_Toc372634640">共享图片</a></p>
                                <p class="MsoToc2"><a href="#_Toc372634641">Windows phone</a></p>
                                <p class="MsoToc2"><a href="#_Toc372634642">Windows 8</a></p>
                                <p class="MsoToc2"><a href="#_Toc372634643">Android</a></p>
                                <p class="MsoToc1"><a href="#_Toc372634644">分享链接</a></p>
                                <p class="MsoToc2"><a href="#_Toc372634645">Windows phone</a></p>
                                <p class="MsoToc2"><a href="#_Toc372634646">Windows 8</a></p>
                                <p class="MsoToc2"><a href="#_Toc372634647">Android</a></p>
                                <p class="MsoToc1"><a href="#_Toc372634648">接受分享内容</a></p>
                                <p class="MsoToc2"><a href="#_Toc372634649">Windows 8</a></p>
                                <p class="MsoToc2"><a href="#_Toc372634650">Android</a></p>
                                <p class="MsoToc3"><a href="#_Toc372634651">更新Manifest文件</a></p>
                                <p class="MsoToc3"><a href="#_Toc372634652">处理接收到的数据</a></p>
                                <p class="MsoToc1"><a href="#_Toc372634653">IOS中ShareSDK的使用</a></p>
                                <p class="MsoToc2"><a href="#_Toc372634654">分享内容</a></p>
                                <p class="MsoToc2"><a href="#_Toc372634655">离线分享内容提交。</a></p>
                                <p class="MsoToc2"><a href="#_Toc372634656">获取当前用户信息</a></p>
                                <p class="MsoToc2"><a href="#_Toc372634657">关注指定用户</a></p>
                                <p class="MsoToc2"><a href="#_Toc372634658">用户授权</a></p>
                                <p class="MsoToc1"><a href="#_Toc372634659">另请参见</a></p>
                                <br />
                                <h1><a name="_Toc372634634">概述</a></h1>
                                <p>成功的应用应该能够让用户轻松地与其家人和朋友即时共享他们的活动。能够让用户轻松共享内容的应用往往会获得更多的关注，从而鼓励用户更频繁地使用这些应用。Windows phone、windows 8、Android都提供了相应的机制来实现该功能，可以帮助你将用户与他们所关心的人和最常使用的应用连接起来。IOS一般使用ShareSDK实现分享功能。ShareSDK是一个第三方类库，不仅可以应用与IOS，同样可以应用在Android。</p>
                                <p>应用可以通过两种方式来实现共享特性。首先，应用作为可以为用户提供要共享的内容源应用。其次，应用可以是用户选择作为共享内容目标的目标应用。一个应用也可以既是源应用，也是目标应用。</p>
                                <p>被分享的内容的格式可以是多种类型，常见的有文本、图片、链接等。</p>
                                <h1><a name="_Toc372634635">不同平台横向比较</a></h1>
                                <p style='margin-left: 10.5pt;'>由于IOS使用第三方类库ShareSDK实现分享，如下表格对android、win8和Windowsphone8平台分享文本、图片和链接内容的实现方式进行比较：</p>
                                <table>
                                    <tr>
                                        <td>
                                            <p style='text-align: center'>&nbsp;</p>
                                        </td>
                                        <td>
                                            <p style='text-align: center'>Android</p>
                                        </td>
                                        <td>
                                            <p style='text-align: center'>Win8</p>
                                        </td>
                                        <td>
                                            <p style='text-align: center'>Windows phone 8</p>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <p style='text-align: center'>文本</p>
                                        </td>
                                        <td>
                                            <p style='text-align: center'>Intent.setType(text/plain)</p>
                                        </td>
                                        <td>
                                            <p style='text-align: center'>DataPackage.setText</p>
                                        </td>
                                        <td>
                                            <p style='text-align: center'>ShareStatusTask</p>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <p style='text-align: center'>图片</p>
                                        </td>
                                        <td>
                                            <p style='text-align: center'>Intent.setType(image/jpeg)</p>
                                        </td>
                                        <td>
                                            <p style='text-align: center'>DataPackage.setBitmap</p>
                                        </td>
                                        <td>
                                            <p style='text-align: center'>ShowShareMediaTask</p>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <p style='text-align: center'>链接</p>
                                        </td>
                                        <td>
                                            <p style='text-align: center'>Intent.setType(text/plain)</p>
                                        </td>
                                        <td>
                                            <p style='text-align: center'>DataPackage.setUri</p>
                                        </td>
                                        <td>
                                            <p style='text-align: center'>ShareLinkTask</p>
                                        </td>
                                    </tr>
                                </table>
                                <p>以下分别介绍Windows phone、windows 8、Android平台下不同内容的分享方式。本文最后介绍了ShareSDK在IOS中的使用方法。</p>
                                <h1><a name="_Toc372634636">共享文本内容</a></h1>
                                <h2><a name="_Toc372634637">Windows phone </a></h2>
                                <p>使用共享状态任务可使用户能够在其所的社交网络上共享状态消息。使用启动器，可以帮助您在 Windows&nbsp;Phone 平台中提供一致的用户体验</p>
                                <p>首先引入以下命名空间：</p>
                                <pre><code>using Microsoft.Phone.Tasks;</code></pre>
                                <p>然后，在应用程序中的所需位置添加以下代码，例如按键点击事件中。为了测试此过程，可以将该代码放置在页面构造函数中。以下是启动任务的代码：</p>
                                <pre><code>ShareStatusTask shareStatusTask = new ShareStatusTask();

shareStatusTask.Status = "I'm developing a Windows Phone application!";

shareStatusTask.Show();</code></pre>
                                <p>
                                    详请参见<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windowsphone/develop/hh394027(v=vs.105).aspx"
                                        title="如何使用 Windows Phone 的共享状态任务">如何使用
Windows Phone 的共享状态任务</a>
                                </p>
                                <h2><a name="_Toc372634638">Windows 8</a></h2>
                                <p>
                                    共享文本是最基本、也是最必要的内容共享方法。除了纯文本消息（如状态更新）之外，我们还建议你的应用在下列情况中支持文本共享：当你希望内容可由大量目标应用使用时、在共享链接或共享
HTML 时作为辅助源。
                                </p>
                                <p>可按以下步骤实现文本共享：</p>
                                <h4>添加 DataTransfer 命名空间</h4>
                                <p style='margin: 0cm; margin-bottom: .0001pt;'>
                                    你需要做的是向你的应用中添加合适的命名空间，以便创建并处理与共享相关的对象。至少应该添加&nbsp;<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.aspx"><strong>Windows.ApplicationModel.DataTransfer</strong></a>&nbsp;命名空间：
                                </p>
                                <pre><code>using Windows.ApplicationModel.DataTransfer</code></pre>
                                <p>此命名空间中包含基本共享所需的所有内容。然而，请牢记，如果你希望共享图像或文件等内容，则还需要添加相应的命名空间。下表列出了你可能需要的命名空间：</p>
                                <p class="MsoListParagraph" style='margin-left: 31.5pt;'>
                                    <a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.storage.aspx"><b>Windows.Storage</b></a>.使用&nbsp;<a
                                            href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.storage.storagefile.aspx"><b>StorageFile</b></a>&nbsp;和其他对象时需要。
                                </p>
                                <p class="MsoListParagraph" style='margin-left: 31.5pt;'>
                                    <a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.storage.pickers.aspx"><b>Windows.Storage.Pickers</b></a>.用于打开文件选取器，以便用户选择图像和文件。
                                </p>
                                <p class="MsoListParagraph" style='margin-left: 31.5pt;'>
                                    <a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.storage.streams.aspx"><b>Windows.Storage.Streams</b></a>.通常在共享图像、文件和自定义格式的数据时使用。
                                </p>
                                <p class="MsoListParagraph" style='margin-left: 31.5pt;'>
                                    <a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.graphics.imaging.aspx"><b>Windows.Graphics.Imaging</b></a>.当在共享图像之前需要对图像进行修改时有用
                                </p>
                                <h4>获取 DataTransferManager 对象</h4>
                                <pre><code>DataTransferManager dataTransferManager = DataTransferManager.GetForCurrentView();</code></pre>
                                <h4>为 DataRequested 事件添加事件处理程序</h4>
                                <p>
                                    当用户点击“共享”超级按钮时，会发生&nbsp;<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.datatransfermanager.datarequested.aspx">DataRequested</a>&nbsp;事件：
                                </p>
                                <pre><code>dataTransferManager.DataRequested += new TypedEventHandler<DataTransferManager, 
    DataRequestedEventArgs>(this.ShareTextHandler);</code></pre>
                                <h4>获取 DataRequest 对象</h4>
                                <p>
                                    当发生&nbsp;<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.datatransfermanager.datarequested.aspx"><strong>DataRequested</strong></a>&nbsp;事件时，你的应用会收到&nbsp;<a
                                            href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.datarequest.aspx"><strong>DataRequest</strong></a>&nbsp;对象。该对象包含的&nbsp;<a
                                                href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.datapackage.aspx"><strong>DataPackage</strong></a>&nbsp;可用来提供用户要共享的内容
                                </p>
                                <pre><code>DataRequest request = e.Request;</code></pre>
                                <h4>设置标题和描述属性</h4>
                                <pre><code>request.Data.Properties.Title = "Share Text Example";
request.Data.Properties.Description = "A demonstration that shows how to share text.";</code></pre>
                                <h4>向 DataPackage 中添加文本</h4>
                                <p style='margin: 0cm; margin-bottom: .0001pt;'>
                                    要添加文本，请使用&nbsp;<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/br205916.aspx"><strong>setText</strong></a>&nbsp;方法
                                </p>
                                <pre><code>request.Data.SetText("Hello World!");</code></pre>
                                <h2><a name="_Toc372634639">Android</a></h2>
                                <p>ACTION_SEND行为最直接和和常见的用法是从一个应用向另一个内容发送文本内容。例如内置浏览器程序可以以文本的形式，向任何应用分享当前显示的页面的URL。这在通过email或者社交网络向朋友分享一个文章或者网站时是很有用的。如下是实现这种分享方式的代码：</p>
                                <pre><code>Intent sendIntent = new Intent();
sendIntent.setAction(Intent.ACTION_SEND);
sendIntent.putExtra(Intent.EXTRA_TEXT, "This is my text to send.");
sendIntent.setType("text/plain");
startActivity(sendIntent);</code></pre>
                                <p>
                                    如果只有一个已安装应用的过滤器符合
ACTION_SEND和text/plain的MIME类型,Android系统会运行这个应用;如果多个应用符合,系统会显示一个消歧对话框(一个选择器)让用户选择应用。如果您为此intent调用java.lang.CharSequence，Android会<b>始终</b>显示这个选择器。这么做的好处是:
                                </p>
                                <p>即使用户已经为这个intent预先选择了一个默认的行为，仍然会显示选择器。</p>
                                <p>如果没有相符的应用，Android会显示一个系统信息。</p>
                                <p>您可以为这个选择对话框指定一个标题。</p>
                                <p>如下是使用createChooser()的代码：</p>
                                <pre><code>Intent sendIntent = new Intent();
sendIntent.setAction(Intent.ACTION_SEND);
sendIntent.putExtra(Intent.EXTRA_TEXT, "This is my text to send.");
sendIntent.setType("text/plain");
startActivity(Intent.createChooser(sendIntent, getResources().getText(R.string.send_to));</code></pre>
                                <p>
                                    如图所示，作为可选项，您可以为您intent的设置一些标准扩展：EXTRA_EMAIL,
EXTRA_CC, EXTRA_BCC, EXTRA_SUBJECT。但是，如果接受的应用不是为之设计的，此次行为将被忽略。您同样可以使用自定义扩展，但是除非接收应用能够理解，这些扩展将没有效果。通常情况下，您应该使用接收应用自己定义的自定义扩展。
                                </p>
                                <p><b>注</b><b>意</b><b>：</b> 一些e-mail应用-例如Gmail-在接到一些例如EXTRA_EMAIL和EXTRA_CC的扩展时需要一个String[] ，使用putExtra(String, String[])来将这些添加到您的intent中。</p>
                                <h1><a name="_Toc372634640">共享图片</a></h1>
                                <h2><a name="_Toc372634641">Windows phone</a></h2>
                                <p>Windows phone中实现共享照片任务需要启动共享选取器。共享选取器允许您的应用与安装在手机上的某个应用共享图片。可按以下方式实现图片共享功能：</p>
                                <p>1.添加命名空间引用：</p>
                                <pre><code>using Microsoft.Phone.Tasks;</code></pre>
                                <p>2.此示例将使用照片选择器任务以允许用户选择或拍摄照片用于共享。声明任务对象。它必须具有页面范围，因此应在页面中的构造函数之前声明它。</p>
                                <pre><code>CameraCaptureTask cameraCaptureTask = new CameraCaptureTask();</code></pre>
                                <p style='margin: 0cm; margin-bottom: .0001pt'>3. 将以下代码添加到您的页面构造函数中。此代码初始化任务对象，并标识要在用户完成任务后运行的方法。</p>
                                <p style='margin: 0cm; margin-bottom: .0001pt'>4.启动照片选择器任务以允许用户选择或拍摄照片。在应用程序中的所需位置添加以下代码，例如按键点击事件中。为了测试此过程，可以将该代码放置在页面构造函数中。</p>
                                <p style='margin: 0cm; margin-bottom: .0001pt'>
                                    5.在页面中添加已完成事件处理程序的代码。此代码在用户选择照片后运行。结果为包含指向选定照片的路径的&nbsp;<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windowsphone/develop/microsoft.phone.tasks.addressresult(v=vs.105).aspx">AddressResult</a>&nbsp;对象。使用此值设置&nbsp;<a
                                            href="http://msdn.microsoft.com/zh-cn/library/windowsphone/develop/microsoft.phone.tasks.sharemediatask(v=vs.105).aspx">ShareMediaTask</a>&nbsp;对象的&nbsp;<a
                                                href="http://msdn.microsoft.com/zh-cn/library/windowsphone/develop/microsoft.phone.tasks.sharemediatask.filepath(v=vs.105).aspx">FilePath</a>&nbsp;属性，然后调用&nbsp;<b>Show</b>&nbsp;以启动共享对话框，在这里用户可以选择服务以与之共享项。
                                </p>
                                <pre><code>void cameraCaptureTask_Completed(object sender, PhotoResult e)
       {
	        if(e.TaskResult == TaskResult.OK)
           {
               ShowShareMediaTask(e.OriginalFileName);
           }
       }
       void ShowShareMediaTask(string path)
       {
           ShareMediaTask shareMediaTask = new ShareMediaTask();
           shareMediaTask.FilePath = path;
           shareMediaTask.Show();
       }</code></pre>
                                <h2><a name="_Toc372634642">Windows 8</a></h2>
                                <p>用户希望共享的最常见内容类型或许就是图像和照片。此处，我们将向你介绍如何从你的应用共享单个图像。</p>
                                <p>
                                    本部分中的代码侧重于使用&nbsp;<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/hh738426.aspx"><b>SetBitmap</b></a>&nbsp;共享位图图像。用户通常共享由文件表示的图像。因此，我们建议你的应用还支持&nbsp;<a
                                            href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.datapackageview.getstorageitemsasync.aspx"><b>StorageItems</b></a>，它可以是一个文件集合。我们在<a
                                                href="http://msdn.microsoft.com/zh-cn/library/windows/apps/hh871371.aspx">如何共享文件</a>中介绍如何支持&nbsp;<b>StorageItems</b>
                                </p>
                                <h4>添加 DataTransfer 命名空间</h4>
                                <p style='margin: 0cm; margin-bottom: .0001pt;'>
                                    你需要做的是向你的应用中添加合适的命名空间，以便创建并处理与共享相关的对象。至少应该添加&nbsp;<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.aspx"><strong>Windows.ApplicationModel.DataTransfer</strong></a>&nbsp;命名空间
                                </p>
                                <pre><code>using Windows.ApplicationModel.DataTransfer;</code></pre>
                                <p>此命名空间中包含基本共享所需的所有内容。然而，请牢记，如果你希望共享图像或文件等内容，则还需要添加相应的命名空间。下表列出了你可能需要的命名空间：</p>
                                <p style='margin-left: 18.0pt;'>
                                    ●
                            <a
                                href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.storage.aspx"><b>Windows.Storage</b></a>.使用&nbsp;<a
                                    href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.storage.storagefile.aspx"><b>StorageFile</b></a>&nbsp;和其他对象时需要。
                                </p>
                                <p style='margin-left: 18.0pt;'>
                                    ●
                            <a
                                href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.storage.pickers.aspx"><b>Windows.Storage.Pickers</b></a>.用于打开文件选取器，以便用户选择图像和文件。
                                </p>
                                <p style='margin-left: 18.0pt;'>
                                    ●
                            <a
                                href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.storage.streams.aspx"><b>Windows.Storage.Streams</b></a>.通常在共享图像、文件和自定义格式的数据时使用。
                                </p>
                                <p style='margin-left: 18.0pt;'>
                                    ●
                            <a
                                href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.graphics.imaging.aspx"><b>Windows.Graphics.Imaging</b></a>.当在共享图像之前需要对图像进行修改时有用
                                </p>
                                <h4>获取 DataTransferManager 对象</h4>
                                <p style='margin: 0cm; margin-bottom: .0001pt;'>
                                    <a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.datatransfermanager.aspx"><strong>DataTransferManager</strong></a>&nbsp;对象是任何共享操作的起点
                                </p>
                                <pre><code>DataTransferManager dataTransferManager = DataTransferManager.GetForCurrentView();</code></pre>
                                <h4>为 DataRequested 事件添加事件处理程序</h4>
                                <p style='margin: 0cm; margin-bottom: .0001pt;'>
                                    当用户点击“共享”超级按钮时，会发生&nbsp;<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.datatransfermanager.datarequested.aspx"><strong>DataRequested</strong></a>&nbsp;事件。
                                </p>
                                <pre><code>dataTransferManager.DataRequested += new TypedEventHandler<DataTransferManager, 
    DataRequestedEventArgs>(this.ShareImageHandler);</code></pre>
                                <h4>获取 DataRequest 对象</h4>
                                <p style='margin: 0cm; margin-bottom: .0001pt;'>
                                    当发生&nbsp;<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.datatransfermanager.datarequested.aspx"><strong>DataRequested</strong></a>&nbsp;事件时，你的应用会收到&nbsp;<a
                                            href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.datarequest.aspx"><strong>DataRequest</strong></a>&nbsp;对象。该对象包含的&nbsp;<a
                                                href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.datapackage.aspx"><strong>DataPackage</strong></a>&nbsp;可用来提供用户要共享的内容
                                </p>
                                <pre><code>DataRequest request = e.Request;</code></pre>
                                <h4>设置标题和描述属性</h4><pre><code>request.Data.Properties.Title = "Share Image Example";
request.Data.Properties.Description = "Demonstrates how to share an image.";</code></pre>
                                <h4>向 DataPackage 添加缩略图</h4>
                                <p style='margin: 0cm; margin-bottom: .0001pt;'>我们建议，只要你共享图像，就总是添加缩略图图像</p><pre><code>request.Data.Properties.Thumbnail = RandomAccessStreamReference.CreateFromFile(thumbnailFile);</code></pre>
                                <h4>将图像作为位图添加到 DataPackage 中</h4>
                                <p style='margin: 0cm; margin-bottom: .0001pt;'>
                                    要共享图像，请使用&nbsp;<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/hh738426.aspx"><strong>SetBitmap</strong></a>&nbsp;方法。此方法预期图像属于&nbsp;<a
                                            href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.storage.streams.randomaccessstreamreference.aspx"><strong>RandomAccessStreamReference</strong></a>&nbsp;类型。要共享多个图像，请以&nbsp;<a
                                                href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.standarddataformats.storageitems.aspx"><strong>StorageItems</strong></a>&nbsp;的方式共享这些图像。我们在<a
                                                    href="http://msdn.microsoft.com/zh-cn/library/windows/apps/hh871371.aspx">如何共享文件</a>中介绍如何支持&nbsp;<strong>StorageItems</strong>。这可帮助确保用户在共享图像时可以从最大数量的应用中选择。
                                </p><pre><code>request.Data.SetBitmap(RandomAccessStreamReference.CreateFromFile(imageFile));</code></pre>
                                <p class="MsoListParagraph" style='margin-left: 21.0pt;'>
                                    备注：
                                </p>
                                <p style='margin: 0cm; margin-bottom: .0001pt;'>
                                    如果你的应用需要使用异步操作来准备图像或缩略图，你将需要使用推迟模式。我们将在<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/hh871365.aspx">如何在你的数据请求的处理程序中进行异步调用</a>中介绍具体做法。
                                </p>
                                <p style='margin: 0cm; margin-bottom: .0001pt;'>
                                    如果你的应用需要花费超过 200 毫秒才能准备好图像，则需要使用委托函数来共享该图像。我们将在<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/hh871375.aspx">如何支持拉操作</a>中介绍具体做法
                                </p>
                                <h2><a name="_Toc372634643">Android</a></h2>
                                <p>Android中将图片以二进制数据进行分享，二进制数据是通过使用ACTION_SEND行为结合设置适当的MIME类型，或者放置URI到名为EXTRA_STREAM的扩展数据里来分享的。这通常被用来分享图像，但也可以分享任何类型的二进制内容：</p>
                                <pre><code>Intent shareIntent = new Intent();
shareIntent.setAction(Intent.ACTION_SEND);
shareIntent.putExtra(Intent.EXTRA_STREAM, uriToImage);
shareIntent.setType("image/jpeg");
startActivity(Intent.createChooser(shareIntent, getResources().getText(R.string.send_to)));</code></pre>
                                <p><b>注意：</b> 您可以使用MIME类型*/*，但是这只会匹配那些能够接收通用数据流的应用。</p>
                                <p>接收方应用需要能够访问Uri所指向内容的权限。这里有一些方法来处理它：</p>
                                <p style='margin-left: 36.0pt;'>
                                    ●
将数据写在扩展存储或者共享存储(例如SD卡)的文件中。使用Use Uri.fromFile()来建立传递给intent的Uri。但请记住不是所有的应用都能处理file://类型的Uri。
                                </p>
                                <p style='margin-left: 36.0pt;'>
                                    ●
在MODE_WORLD_READABLE模式下，使用int)
openFileOutput()将数据写在您自己的应用目录下的文件中，之后getFileStreamPath()可以用来返回一个文件。和前面一条相同，Uri.fromFile()会为您的intent建立一个file://类型的Uri。
                                </p>
                                <p style='margin-left: 36.0pt;'>
                                    ●
媒体文件和图像相同，可以通过使用scanFile()扫描视频和音频并添加进系统的MediaStore。onScanCompleted()的回调返回一个content://类型的Uri来匹配您的intent。
                                </p>
                                <p style='margin-left: 36.0pt;'>
                                    ●
insertImage()可以将图像插入到系统MediaStore中，并返回一个content://类型的Uri来匹配您的intent。
                                </p>
                                <p>将数据保存到您自己的ContentProvider中，以保证其他应用有正确访问您provider的权限（或者使用per-URI权限）。</p>
                                <h1><a name="_Toc372634644">分享链接</a></h1>
                                <h2><a name="_Toc372634645">Windows phone</a></h2>
                                <p>使用共享链接任务可使用户能够在其所的社交网络上共享链接，可按以下方法实现分享链接：</p>
                                <p>1.添加命名空间引用</p><pre><code>using System;
using Microsoft.Phone.Tasks;</code></pre>
                                <p>2. 在应用程序中的所需位置添加以下代码，例如按键点击事件中。为了测试此过程，可以将该代码放置在页面构造函数中。以下是启动任务的代码。</p><pre><code>ShareLinkTask shareLinkTask = new ShareLinkTask();

shareLinkTask.Title = "Code Samples";
shareLinkTask.LinkUri = new Uri("http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff431744(v=vs.92).aspx", UriKind.Absolute);
shareLinkTask.Message = "Here are some great code samples for Windows Phone.";

shareLinkTask.Show();</code></pre>
                                <h2><a name="_Toc372634646">Windows 8</a></h2>
                                <p>链接或 URI 是用户希望共享的另一种常见数据格式。对链接进行共享的最常见前提是用户已明确选择了一个链接；但是，我们还建议你的应用支持对链接进行共享：当用户选择的内容也可联机使用时、作为共享 HTML 时的辅助源。</p>
                                <p>
                                    也可以通过使用“设备”超级按钮中的“点击并发送”共享链接。
“点击并发送”是通过近场通信 (NFC) 共享的。
                                </p>
                                <h4>&nbsp;添加 DataTransfer 命名空间</h4>
                                <p style='margin: 0cm; margin-bottom: .0001pt;'>
                                    你需要做的是向你的应用中添加合适的命名空间，以便创建并处理与共享相关的对象。至少应该添加&nbsp;<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.aspx"><strong>Windows.ApplicationModel.DataTransfer</strong></a>&nbsp;命名空间：
                                </p>
                                <pre><code>using Windows.ApplicationModel.DataTransfer</code></pre>
                                <p>此命名空间中包含基本共享所需的所有内容。然而，请牢记，如果你希望共享图像或文件等内容，则还需要添加相应的命名空间。下表列出了你可能需要的命名空间：</p>
                                <p style='margin-left: 18.0pt;'>
                                    ●
                            <a
                                href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.storage.aspx"><b>Windows.Storage</b></a>。使用&nbsp;<a
                                    href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.storage.storagefile.aspx"><b>StorageFile</b></a>&nbsp;和其他对象时需要。
                                </p>
                                <p style='margin-left: 18.0pt;'>
                                    ●
                            <a
                                href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.storage.pickers.aspx"><b>Windows.Storage.Pickers</b></a>。用于打开文件选取器，以便用户选择图像和文件。
                                </p>
                                <p style='margin-left: 18.0pt;'>
                                    ●
                            <a
                                href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.storage.streams.aspx"><b>Windows.Storage.Streams</b></a>。通常在共享图像、文件和自定义格式的数据时使用。
                                </p>
                                <p style='margin-left: 18.0pt;'>
                                    ●
                            <a
                                href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.graphics.imaging.aspx"><b>Windows.Graphics.Imaging</b></a>。当在共享图像之前需要对图像进行修改时有用。
                                </p>
                                <h4>获取 DataTransferManager 对象</h4>
                                <p style='margin: 0cm; margin-bottom: .0001pt;'>
                                    <a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.datatransfermanager.aspx"><strong>DataTransferManager</strong></a>&nbsp;对象是任何共享操作的起点
                                </p><pre><code>DataTransferManager dataTransferManager = DataTransferManager.GetForCurrentView();</code></pre>
                                <h4>为 DataRequested 事件添加事件处理程序</h4>
                                <p style='margin: 0cm; margin-bottom: .0001pt;'>
                                    当用户点击“共享”超级按钮时，会发生&nbsp;<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.datatransfermanager.datarequested.aspx"><strong>DataRequested</strong></a>&nbsp;事件
                                </p><pre><code>dataTransferManager.DataRequested += new TypedEventHandler<DataTransferManager, 
    DataRequestedEventArgs>(this.ShareLinkHandler);</code></pre>
                                <h4>获取 DataRequest 对象</h4>
                                <p style='margin: 0cm; margin-bottom: .0001pt;'>
                                    当发生&nbsp;<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.datatransfermanager.datarequested.aspx"><strong>DataRequested</strong></a>&nbsp;事件时，你的应用会收到&nbsp;<a
                                            href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.datarequest.aspx"><strong>DataRequest</strong></a>&nbsp;对象。该对象包含的&nbsp;<a
                                                href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.datapackage.aspx"><strong>DataPackage</strong></a>&nbsp;可用来提供用户要共享的内容。
                                </p>
                                <pre><code>DataRequest request = e.Request;</code></pre>
                                <h4>设置标题和描述属性。</h4>
                                <pre><code>request.Data.Properties.Title = "Share Image Example";
request.Data.Properties.Description = "Demonstrates how to share an image.";</code></pre>
                                <h4>向 DataPackage 中添加链接</h4><pre><code>request.Data.SetUri(new Uri("http://www.fabrikam.com"));</code></pre>
                                <h2><a name="_Toc372634647">Android</a></h2>
                                <p>Android中分享链接与分享为文本方法相同，用url替换文本即可，例如：</p><pre><code>Intent sendIntent = new Intent();
sendIntent.setAction(Intent.ACTION_SEND);
sendIntent.putExtra(Intent.EXTRA_TEXT, " http://123.sogou.com/");
sendIntent.setType("text/plain");
startActivity(sendIntent);</code></pre>
                                <h1><a name="_Toc372634648">接受分享内容</a></h1>
                                <h2><a name="_Toc372634649">Windows 8</a></h2>
                                <p>此快速入门将带你完成从另一个 Windows 应用商店应用接收共享内容所需的步骤。</p>
                                <p><b>目标: </b>了解如何接收共享内容</p>
                                <h4>支持“共享目标”合约</h4>
                                <p>在你的应用可以接收共享的内容之前，你必须声明它支持“共享内容”合约。该合约可让系统获知你的应用可用于接收内容。如果你使用 Visual Studio 模板来创建应用，则可以参考以下说明来支持“共享目标”合约：</p>
                                <ol start="1" type="1">
                                    <li>打开清单文件。其名称应该类似于“package.appxmanifest”。</li>
                                    <li>打开“声明”选项卡。</li>
                                    <li>从“可用声明”列表中选择“共享目标”，然后单击“添加”。</li>
                                </ol>
                                <h4>指定支持的文件类型和数据格式</h4>
                                <p>作为目标应用开发人员，你需要决定要支持哪些文件类型和数据格式。若要指定你的应用支持的文件类型，请执行以下操作：</p>
                                <ol start="1" type="1">
                                    <li>打开清单文件。该文件的名称类似 <b>package.appxmanifest</b>。</li>
                                    <li>在“声明”页的“支持的文件类型”部分，单击“添加”。</li>
                                    <li>键入要支持的文件格式。例如，.docx。你需要包括句点 (.)。</li>
                                </ol>
                                <p>如果希望支持所有文件类型，请选中“支持所有文件类型”框。</p>
                                <p>若要指定你支持的数据格式，请执行以下操作：</p>
                                <ol start="1" type="1">
                                    <li>打开清单文件。</li>
                                    <li>在“声明”页的“数据格式”部分，单击“新加”。</li>
                                    <li>键入支持的数据格式。例如，“文本”。</li>
                                </ol>
                                <p>共享 API 支持多种标准格式，如文本、HTML 和位图。你还可以指定自定义文件类型和数据格式。此时源应用必须明确这些类型和格式，否则它们无法使用这些格式来共享数据。</p>
                                <h4>添加
DataTransfer 命名空间</h4>
                                <p>
                                    你需要向你的应用中添加合适的命名空间，以处理共享激活事件，并创建和处理与共享相关的对象。对于目标应用，你需要<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.activation.aspx">Windows.ApplicationModel.Activation</a><u>、</u><a
                                            href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.aspx">Windows.ApplicationModel.DataTransfer</a>和<a
                                                href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.sharetarget.aspx">Windows.ApplicationModel.DataTransfer.ShareTarget</a>命名空间：
                                </p><pre><code>using Windows.ApplicationModel.Activation;
using Windows.ApplicationModel.DataTransfer;
using Windows.ApplicationModel.DataTransfer.ShareTarget;</code></pre>
                                <h4>处理共享激活</h4>
                                <p>
                                    当用户选择你的应用时（通常通过从共享UI中可用目标应用的列表中选择），将触发 <a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.ui.xaml.application.onsharetargetactivated.aspx">Application.OnShareTargetActivated</a>事件。你的应用需要处理此事件来处理用户要共享的数据。
                                </p><pre><code>protected override async void OnShareTargetActivated(ShareTargetActivatedEventArgs args)
{
    // Code to handle activation goes here.	
}</code></pre>
                                <p>
                                    用户要共享的数据包含在一个<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.sharetarget.shareoperation.aspx">ShareOperation</a>对象中。你可以使用该对象来检查所包含数据的格式。以下是处理纯文本格式的共享内容的事件处理程序的一个示例：
                                </p><pre><code>用户要共享的数据包含在一个ShareOperation对象中。你可以使用该对象来检查所包含数据的格式。以下是处理纯文本格式的共享内容的事件处理程序的一个示例：
ShareOperation shareOperation = args.ShareOperation;
if (shareOperation.Data.Contains(StandardDataFormats.Text))
{
    string text = await shareOperation.Data.GetTextAsync();

    // To output the text from this example, you need a TextBlock control
    // with a name of "sharedContent".
    sharedContent.Text = "Text: " + text;
}</code></pre>
                                <h4>报告扩展共享状态（针对耗时操作）</h4>
                                <p>在某些情况下，你的应用可能需要花费一定时间来处理要共享的数据。我们将这些情形称为扩展共享。扩展共享的示例包括用户共享文件或图像的集合。这些项目比简单的文本字符串大，因此处理时间较长。</p>
                                <p class="note"><b>注意</b>&nbsp;如果你只希望共享简单的文本或超链接，则可以跳过本部分。</p>
                                <p>
                                    作为目标应用，你的应用不应只是因为应用需要更多时间来处理数据，就迫使用户留在共享 UI 中。你应当使用<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.sharetarget.shareoperation.aspx">ShareOperation</a>对象让系统获知你的应用仍在工作。那样，用户可以关闭共享 UI 并返回到他们正在进行的事项。同时，你的应用继续在后台处理数据。
                                </p>
                                <pre><code>shareOperation.ReportStarted();</code></pre>
                                <p>
                                    在调用<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.sharetarget.shareoperation.reportstarted.aspx">ReportStarted</a>之后，不应该期望更多用户与你应用的交互。因此，你不应该调用它，除非你的应用处于可以由用户关闭的位置。
                                </p>
                                <p>
                                    使用扩展共享时，用户有可能会在你的应用获得来自<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.datapackage.aspx">DataPackage</a>对象的所有数据之前关闭源应用。因此，我们建议你让系统知道你的应用何时已获得它所需的数据。这样，系统可以根据需要挂起或终止源应用。
                                </p>
                                <pre><code>shareOperation.ReportDataRetreived();</code></pre>
                                <p>
                                    最好能让系统获知你是否在使用某种<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/br212018.aspx">Windows.Networking.BackgroundTransfer
classes</a>上载内容。你可以使用<a
    href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.sharetarget.shareoperation.reportsubmittedbackgroundtask.aspx">ReportSubmittedBackgroundTask</a>方法完成此操作。
                                </p>
                                <pre><code>shareOperation.ReportSubmittedBackgroundTask();</code></pre>
                                <p>
                                    如果发生错误，你还可以调用<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.sharetarget.shareoperation.reporterror.aspx">ReportError</a>向系统发送一条错误消息。用户在检查共享的状态时将看到该消息。此时，你的应用将关闭并且结束共享—用户将需要再次启动才能将内容共享给你的应用。根据你的方案，你可能确定某个特殊错误并不严重，不足以结束共享操作。在这种情况下，你可以选择不调用ReportError并且继续此共享。
                                </p><pre><code>shareOperation.ReportError("Could not reach the server! Try again later.");</code></pre>
                                <p>
                                    在使用这些方法时，请确保按照所述的顺序来进行调用，不要多次调用它们。然而在某些时候，目标应用可能会在调用<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.sharetarget.shareoperation.reportstarted.aspx">ReportStarted</a>之前调用<a
                                            href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.sharetarget.shareoperation.reportdataretrieved.aspx">ReportDataRetrieved</a>。例如，应用可能在激活处理程序中执行任务时检索数据，但不调用
                            <b>ReportStarted</b>，直到用户单击“共享”按钮之后才调用。
                                </p>
                                <p>若要了解共享的实际应用，请查看我们的<a href="http://go.microsoft.com/fwlink/p/?linkid=231519">共享内容目标应用示例</a>。</p>
                                <h4>报告共享已完成</h4>
                                <p>
                                    最后，当你的应用成功处理好共享内容之后，你应当调用<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.sharetarget.shareoperation.reportcompleted.aspx">ReportCompleted</a>来通知系统。
                                </p>
                                <pre><code>shareOperation.ReportCompleted();</code></pre>
                                <p>在你的应用获悉共享完成之后，你的应用会被关闭。</p>
                                <h4>如果共享成功，则返回
Quicklink 对象</h4>
                                <p>
                                    当用户选择你的应用来接收共享的内容时，我们强烈建议你创建一个<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.sharetarget.quicklink.aspx">QuickLink</a>。<b>QuickLink</b> 类似于快捷方式，可让用户更轻松地使用你的应用共享信息。例如，你的应用可以创建一个
                            <b>QuickLink</b>，用来打开预配置了好友电子邮件地址的新邮件。
                                </p>
                                <p>
                                    <a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.sharetarget.quicklink.aspx">QuickLink</a>必须包含标题、图标和 ID。当用户点击“共享”超级按钮时，会显示标题（类似 Email Mom）和图标。你的应用使用 ID 来访问任何自定义信息，如电子邮件地址或登录凭据。当你的应用创建 QuickLink 时，应用会通过调用<a
                                            href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.sharetarget.shareoperation.aspx">ShareOperation</a>对象的<u> </u><a
                                                href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.sharetarget.shareoperation.reportcompleted.aspx">ReportCompleted</a>方法，将 <b>QuickLink</b> 返回到系统。下面是一个示例：
                                </p><pre><code>async void ReportCompleted(ShareOperation shareOperation, string quickLinkId, string quickLinkTitle)
{
    QuickLink quickLinkInfo = new QuickLink
    {
        Id = quickLinkId,
        Title = quickLinkTitle,

        // For quicklinks, the supported FileTypes and DataFormats are set 
        // independently from the manifest
        SupportedFileTypes = { "*" },
        SupportedDataFormats = { StandardDataFormats.Text, StandardDataFormats.Uri, 
                StandardDataFormats.Bitmap, StandardDataFormats.StorageItems }
    };

    StorageFile iconFile = await Windows.ApplicationModel.Package.Current.InstalledLocation.CreateFileAsync(
            "assets\\user.png", CreationCollisionOption.OpenIfExists);
    quickLinkInfo.Thumbnail = RandomAccessStreamReference.CreateFromFile(iconFile);
    shareOperation.ReportCompleted(quickLinkInfo);
}</code></pre>
                                <p>
                                    请记住，你的应用负责存储<a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.sharetarget.quicklink.aspx">QuickLink</a>的 ID 及相应的用户数据。当用户点击
                            <b>QuickLink</b> 时，你可以通过<a
                                href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.sharetarget.shareoperation.aspx">ShareOperation</a>对象的<a
                                    href="http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.applicationmodel.datatransfer.sharetarget.shareoperation.quicklinkid.aspx">QuickLinkId</a>属性获取其
ID。
                                </p>
                                <h2><a name="_Toc372634650">Android</a></h2>
                                <p>
                                    应用程序能够发送数据到其他程序，同样，也能够接收从其他程序发送过来的数据。需要考虑的是用户与应用程序如何进行交互，你想要从其他程序接收哪些数据类型。例如，一个社交网络程序会希望能够从其他程序接受文本数据，像一个有趣的网址链接。Google+
Android application客户端会接受文本数据与单张或者多张图片。通过这个程序，用户可以很方便地从Gallery程序选择一张图片来启动Google+进行发布。
                                </p>
                                <h3><a name="_Toc372634651">更新Manifest文件</a></h3>
                                <p>
                                    Intent
filters通知Android系统一个程序会接受哪些数据。和Send
Content to Other Apps Using Intents一课中用ACTION_SEND动作生成一个intent一样，可以通过在manifest文件中用元素标签来定义intent
filters以表明程序能够接收哪些intent。下面是个例子，定义的activity分别指定了可以接收文本、单张图片或者多张图片。
                                </p><textarea>Intent filters通知Android系统一个程序会接受哪些数据。和Send Content to Other Apps Using Intents一课中用ACTION_SEND动作生成一个intent一样，可以通过在manifest文件中用元素标签来定义intent filters以表明程序能够接收哪些intent。下面是个例子，定义的activity分别指定了可以接收文本、单张图片或者多张图片。
<activity android:name=".ui.MyActivity" >
    <intent-filter>
        <action android:name="android.intent.action.SEND" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:mimeType="image/* " />
    </intent-filter>
    <intent-filter>
        <action android:name="android.intent.action.SEND" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:mimeType="text/plain" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.intent.action.SEND_MULTIPLE" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:mimeType="image/* " />
    </intent-filter></textarea>
                                <p>
                                    <b>注意：</b> 更多关于intent和intent
filter的信息，请参考Intents and
Intent Filters
                                </p>
                                <p>当另外一个程序通过创建intent并传给startActivity()以尝试分享一些东西时，你的程序会被呈现在一个列表里面让用户进行选择。如果用户选择了你的程序，相应的activity就应该被调用开启(上面例子中的.ui.MyActivity)，这个时候就是你如何处理获取到的数据的问题了。</p>
                                <h3><a name="_Toc372634652">处理接收到的数据</a></h3>
                                <p>为了处理从Intent传过来的数据，可以通过调用getIntent()方法来获取到Intent对象。一旦获取该对象，就可以对里面的数据进行判断，从而决定下一步应该做什么。请记住，如果一个activity可以被其他的程序启动，你需要在检查intent的时候考虑这种情况。</p>
                                <pre><code>为了处理从Intent传过来的数据，可以通过调用getIntent()方法来获取到Intent对象。一旦获取该对象，就可以对里面的数据进行判断，从而决定下一步应该做什么。请记住，如果一个activity可以被其他的程序启动，你需要在检查intent的时候考虑这种情况。
void onCreate (Bundle savedInstanceState) {
    ...
    // Get intent, action and MIME type
    Intent intent = getIntent();
    String action = intent.getAction();
    String type = intent.getType();

    if (Intent.ACTION_SEND.equals(action) && type != null) {
        if ("text/plain".equals(type)) {
            handleSendText(intent); // Handle text being sent
        } else if (type.startsWith("image/")) {
            handleSendImage(intent); // Handle single image being sent
        }
    } else if (Intent.ACTION_SEND_MULTIPLE.equals(action) && type != null) {
        if (type.startsWith("image/")) {
            handleSendMultipleImages(intent); // Handle multiple images being sent
        }
    } else {
        // Handle other intents, such as being started from the home screen
    }
    ...
}

void handleSendText(Intent intent) {
    String sharedText = intent.getStringExtra(Intent.EXTRA_TEXT);
    if (sharedText != null) {
        // Update UI to reflect text being shared
    }
}

void handleSendImage(Intent intent) {
    Uri imageUri = (Uri) intent.getParcelableExtra(Intent.EXTRA_STREAM);
    if (imageUri != null) {
        // Update UI to reflect image being shared
    }
}

void handleSendMultipleImages(Intent intent) {
    ArrayList<Uri> imageUris = intent.getParcelableArrayListExtra(Intent.EXTRA_STREAM);
    if (imageUris != null) {
        // Update UI to reflect multiple images being shared
    }
}</code></pre>
                                <p><b>警告：</b> 因为你无法知道其他程序发送过来的数据内容是文本还是其他的数据，例如设置错误的MIME类型或者发送了过大的图片，因此你需要避免在UI线程里面而是在单独的线程里去处理那些获取到的二进制数据。</p>
                                <p>更新UI可以像更新EditText一样简单，也可以是比过滤出感兴趣的图片还复杂的操作。因此，接下来会发生什么事情最终要取决于你的程序</p>
                                <h1><a name="_Toc372634653">IOS中ShareSDK的使用</a></h1>
                                <h2><a name="_Toc372634654">分享内容 </a></h2>
                                <p>在分享内容部分ShareSDK提供了三种方式：</p>
                                <p class="MsoListParagraph" style='margin-left: 21.0pt;'>
                                    l&nbsp;
菜单方式分享： 使用此方式进行分享会首先弹出菜单供用户选择分享的目标平台，然后再显示内容编辑界面供用户进行分享内容编辑，最后进行分享。调用该方式的接口如下：
                                </p>
                                <p class="imgp">
                                    <img border="0" width="553"
                                        height="350" id="图片 6" src="images/developing_09/image001.png">
                                </p>
                                <p class="imgp">
                                    <img border="0" width="554"
                                        height="218" id="图片 7" src="images/developing_09/image002.png">
                                </p>
                                <p class="MsoListParagraph" style='margin-left: 21.0pt;'>分享界面如下图所示：</p>
                                <p class="imgp">
                                    <img
                                        border="0" width="190" height="336" id="图片 3" src="images/developing_09/image003.png">
                                </p>
                                <p class="MsoListParagraph" style='margin-left: 21.0pt;'>
                                    l&nbsp;
分享内容视图方式
                                </p>
                                <p class="MsoListParagraph" style='margin-left: 21.0pt;'>
                                    l&nbsp;
使用此方式直接弹出内容分享编辑框，用户编辑完内容后点击发布直接分享出去。调用该方式的接口如下：
                                </p>
                                <p class="imgp">
                                    <img
                                        border="0" width="554" height="189" id="图片 8" src="images/developing_09/image004.png">
                                </p>
                                <p class="imgp">
                                    <img
                                        border="0" width="553" height="60" id="图片 9" src="images/developing_09/image005.png">
                                </p>
                                <p>下图为分享界面示例：</p>
                                <p class="imgp">
                                    <img
                                        border="0" width="193" height="339" id="图片 2" src="images/developing_09/image006.png">
                                </p>
                                <p class="MsoListParagraph" style='margin-left: 21.0pt;'>
                                    l&nbsp;
直接分享方式
                                </p>
                                <p>此方式不需要通过任何分享界面直接发送到指定的平台，调用接口如下：</p>
                                <p class="imgp">
                                    <img
                                        border="0" width="553" height="159" id="图片 10" src="images/developing_09/image007.png">
                                </p>
                                <h2><a name="_Toc372634655">离线分享内容提交。 </a></h2>
                                <p>
                                    对于分享失败或者尚未进行分享的内容可以通过调用ShareSDK的flushOfflineShare 方法进行离线内容的重新提交。其调用方式如下：
                                </p>
                                <p>
                                    [ShareSDK
flushOfflineShare:YES result:nil];
                                </p>
                                <p>
                                    第一个参数为是否在状态栏显示分享提示。
                                </p>
                                <p>第二个参数则为分享返回的处理方法。</p>
                                <h2><a name="_Toc372634656">获取当前用户信息 </a></h2>
                                <p>
                                    获取当前授权用户信息，其调用方式如下：
                                </p>
                                <p class="imgp">
                                    <img
                                        border="0" width="554" height="234" id="图片 4" src="images/developing_09/image008.png">
                                </p>
                                <p>其中第一个参数为平台类型，用于指定获取哪个平台的授权用户信息。如果指定平台的用户尚未进行授权则弹出授权界面。第二个参数为授权返回的处理方法</p>
                                <h2><a name="_Toc372634657">关注指定用户</a></h2>
                                <p>关注指定用户（此接口目前仅支持新浪微博和腾讯微博），其调用方式如下：</p>
                                <p class="imgp">
                                    <img
                                        border="0" width="554" height="264" id="图片 11" src="images/developing_09/image009.png">
                                </p>
                                <p>其中第一个参数为平台类型，用于指定获取哪个平台的授权用户关注列表，如果指定平台的用户尚未进行授权则弹出授权界面。第二个参数为取关注列表的第几页数据，页码从1开始。第三个参数为取关注列表返回的处理方法。</p>
                                <h2><a name="_Toc372634658">用户授权 </a></h2>
                                <p>要想操作相关平台提供的方法必须要先取得用户授权。ShareSDK提供了单独的授权接口来实现用户的登录授权。其代码如下：</p>
                                <p class="imgp">
                                    <img
                                        border="0" width="554" height="216" id="图片 12" src="images/developing_09/image010.png">
                                </p>
                                <p>第一个参数为需要进行授权的平台类型。第二个参数则是授权返回结果的处理方法。</p>
                                <h1><a name="_Toc372634659">另请参见</a></h1>
                                <p>
                                    <a
                                        href="http://msdn.microsoft.com/zh-cn/library/windowsphone/develop/hh394027(v=vs.105).aspx">Windows
Phone 的共享状态任务</a>
                                </p>
                                <p>
                                    <a
                                        href="http://msdn.microsoft.com/zh-cn/library/windowsphone/develop/hh394009(v=vs.105).aspx">Windows
Phone 的共享链接任务</a>
                                </p>
                                <p>
                                    <a
                                        href="http://msdn.microsoft.com/zh-cn/library/windowsphone/develop/jj207027(v=vs.105).aspx">Windows
Phone 的共享媒体任务</a>
                                </p>
                                <p><a href="http://go.microsoft.com/fwlink/p/?linkid=231511">共享内容源应用示例</a></p>
                                <p><a href="http://go.microsoft.com/fwlink/p/?linkid=231519">共享内容目标应用示例</a></p>
                                <p>
                                    <a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/hh871367.aspx">快速入门：接收共享内容</a>
                                </p>
                                <p>
                                    <a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/hh871372.aspx">如何共享文本</a>
                                </p>
                                <p>
                                    <a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/hh973056.aspx">如何共享链接</a>
                                </p>
                                <p>
                                    <a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/hh973055.aspx">如何共享 HTML</a>
                                </p>
                                <p>
                                    <a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/hh871370.aspx">如何共享图像</a>
                                </p>
                                <p>
                                    <a
                                        href="http://msdn.microsoft.com/zh-cn/library/windows/apps/hh871371.aspx">如何共享文件</a>
                                </p>
                                <br />
                            </div>
                        </div>
                    </div>
                    <div class="clear"></div>
                </div>
            </div>
        </div>
        <!--End Content-->
        <div style="text-align: right" class="gotoTop"><a href="javascript:scroll(0,0)"></a></div>
        <!--Begin ProudctLinks-->
        <div class="ms-pro-links">
            <div class="grid-container clearfix">
                <div class="cam-links">
                    其它微软站点
		<a href="http://www.microsoft.com/zh-cn/default.aspx">微软中国官方网站</a>
                    <a href="http://www.microsoft.com/zh-cn/download/default.aspx?WT.mc_id=MSCOM_zh-cn_HP_Footer_downloads" target="_blank">微软中国下载中心</a>
                    <a href="http://www.microsoftstore.com.cn?WT.mc_id=MSCOM_003" target="_blank">微软中国官方商城</a>
                    <a href="http://www.microsoft.com/china/newsletter/" target="_blank">订阅电子期刊</a>
                    <a href="https://sales.liveperson.net/hc/21661174/?cmd=file&file=visitorWantsToChat&site=21661174&byhref=1&SESSIONVAR!skill=APGC.PRC.ZH.CS.CON.PRESLS.GENERAL" target="_blank">联系微软销售代表</a>
                    <a href="http://www.microsoft.com/zh-cn/sitemap.aspx" target="_blank">网站地图</a>
                </div>
            </div>
        </div>
        <!--End ProudctLinks-->
        <!--Begin footer-->
        <div class="footer">
            <div class="grid-container">
                <img src="http://i.s-microsoft.com/global/ImageStore/PublishingImages/logos/hp/logo-type-1x.png" alt="microsoft" class="logo">
                <ul>
                    <li><a href="http://www.miibeian.gov.cn/" title="">京ICP备09042378号-6</a></li>
                    <li><a href="https://profile.microsoft.com/RegSysProfileCenter/default.aspx?lcid=2052" title="">个人信息中心</a></li>
                    <li><a href="http://support.microsoft.com/contactus/?ws=support" title="">与我们联系</a></li>
                    <li><a href="http://go.microsoft.com/fwlink/?LinkId=248681" title="">隐私权声明</a></li>
                    <li><a href="http://go.microsoft.com/?linkid=4412892" title="">使用条款</a></li>
                    <li><a href="http://www.microsoft.com/About/Legal/EN/US/IntellectualProperty/Trademarks/EN-US.aspx" title="">商标</a></li>
                    <li>&copy; 2013 Microsoft</li>
                </ul>
            </div>
        </div>
        <!--End footer-->
        <!-- Begin MDA WEDCS -->
        <script type="text/JavaScript">
            var varSegmentation = 0;
            var varClickTracking = 1;
            var varCustomerTracking = 1;
            var varAutoFirePV = 1;
            var Route = "#";
            var Ctrl = "#"
            //document.write("<script type='text/javascript' src='" + window.location.protocol + "//c.microsoft.com/ms.js'><"+"/script>");
        </script>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script type="text/javascript" src="./assets/js/script.js"></script>
        <script type="text/javascript" src="./js/siteSearch.js"></script>
        <noscript>
            <img alt="" width="1" height="1" src="http://c.microsoft.com/trans_pixel.aspx/" />
        </noscript>
        <!-- Begin MDA WEDCS -->
    </div>
</body>
</html>
