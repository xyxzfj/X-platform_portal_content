<!doctype html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>多媒体: Streaming</title>
    <link rel="stylesheet" href="./assets/css/style.css">
    <link rel="stylesheet" href="css/templete.css" type="text/css" media="all" />
    <meta charset="UTF-8">
</head>
<body class="level-2">
    <div class="wrapper">
        <!--Begin header-->
        <div class="header">
            <div class="grid-container clearfix">
                <div class="header-left">
                    <img alt="Microsoft" src="http://i.s-microsoft.com/global/ImageStore/PublishingImages/logos/hp/logo-lg-1x.png" width="94" height="20">
                    <h1>X-Platform</h1>
                </div>
                <div id="mscom-search" class="mscom-search" style="margin-top: 37px;">
                    <div class="search-form">
                        <form action="" id="search-form">
                            <div class="input-wrapper">
                                <label class="screen-reader-text" for="search-input">搜索 Microsoft.com</label>
                                <input id="search-input" type="text" class="input-area" autocomplete="off">
                            </div>
                            <button class="search-submit" id="search-btn" type="submit">
                                <img width="16" height="16" alt="Submit" src="http://i.s-microsoft.com/global/imagestore/PublishingImages/sprites/search-button-blue.png"></button>
                        </form>
                    </div>
                    <div class="search-results-box" id="results">
                        <div class="search-scope">
                            <ul>
                                <li class=""><a class="checked" search="microsoft" role="search">搜索 Microsoft.com</a></li>
                                <li class=""><a search="internet" role="search">搜索互联网</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--End header-->
        <br />
        <!--Begin Content-->
        <div class="content">
            <div class="wrapper">
                <div class="wrapper-header">
                    <div>
                        <a href="index.html">
                            <img src="./assets/image/banner_1.jpg"></a>
                    </div>
                </div>
                <div class="main">
                    <div class="nav">
                        <div class="block article-nav-block">
                            <h2>移动应用开发生命周期</h2>
                            <div class="menu">
                                <h3><a href="idea.html">计划<span>Idea/Planning</span></a></h3>
                                <ul>
                                    <li><a href="idea_01.html">平台总览</a></li>
                                    <li><a href="idea_02.html">开发工具、开发环境和模拟器</a></li>
                                    <li><a href="idea_03.html">应用结构和生命周期</a></li>
                                </ul>
                            </div>
                            <div class="menu">
                                <h3><a href="design.html">设计<span>Design</span></a></h3>
                                <ul>
                                    <li><a href="design_01.html">UI Layout的设计</a></li>
                                    <li><a href="design_02.html">UI的控件</a></li>
                                    <li><a href="design_03.html">UI页面的控制和导航</a></li>
                                    <li><a href="design_04.html">不同屏幕尺寸和分辨率的适配</a></li>
                                    <li><a href="design_05.html">第三方SDK</a></li>
                                    <li><a href="design_06.html">游戏开发</a></li>
                                </ul>
                            </div>
                            <div class="menu active">
                                <h3><a href="developing.html">开发<span>Developing</span></a></h3>
                                <ul>
                                    <li><a href="developing_01.html">开发语言</a></li>
                                    <li><a href="developing_02.html">Audio、Video Player应用的开发</a></li>
                                    <li><a href="developing_03.html">General APIs Mapping</a></li>
                                    <li><a href="developing_04.html">IAP应用内支付</a></li>
                                    <li><a href="developing_05.html">LBS应用</a></li>
                                    <li><a href="developing_06.html">LBS、镜头和传感器应用接口使用</a></li>
                                    <li><a href="developing_07.html">Native Code（C和C++）支持</a></li>
                                    <li><a href="developing_08.html">Push Notification</a></li>
                                    <li><a href="developing_09.html">Sharing in Social Network</a></li>
                                    <li><a href="developing_10.html">Source Code Control</a></li>
                                    <li><a href="developing_11.html">UI上的Data Binding</a></li>
                                    <li><a href="developing_12.html">Windows 8.1和WP 8 Sharing应用分享功能实现</a></li>
                                    <li><a href="developing_13.html">多媒体</a></li>
                                    <li><a href="developing_14.html">后台任务和多任务处理</a></li>
                                    <li><a href="developing_15.html">获取后台服务器数据</a></li>
                                    <li><a href="developing_16.html">浏览器控件WebView</a></li>
                                    <li><a href="developing_17.html">数据库（SQLite）</a></li>
                                    <li><a href="developing_18.html">数据网络和数据通讯</a></li>
                                    <li><a href="developing_19.html">通话和短信功能</a></li>
                                    <li><a href="developing_20.html">图形处理(Drawing & Animation)</a></li>
                                    <li><a href="developing_21.html">文件系统和应用设置</a></li>
                                    <li><a href="developing_22.html">应用间通信</a></li>
                                    <li><a href="developing_23.html">支付方式</a></li>
                                    <li><a href="developing_24.html">Windows 8.1应用外设开发</a></li>
                                </ul>
                            </div>
                            <div class="menu">
                                <h3><a href="testing.html">测试<span>Testing</span></a></h3>
                                <ul>
                                    <li><a href="testing_01.html">Windows 8 and WP 8开发FAQ</a></li>
                                </ul>
                            </div>
                            <div class="menu last">
                                <h3><a href="distribute.html">发布<span>Distribute</span></a></h3>
                                <ul>
                                    <li><a href="distribute_01.html">应用商店(发布和更新应用)</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="block success-story-nav-block">
                            <h2>成功案例</h2>
                        </div>
                        <div class="block others">
                            <a href="sample_code.html" class="left">示例代码</a>
                            <a href="http://msdn.microsoft.com/zh-cn/dn473954" class="right">教学视频</a>
                        </div>
                    </div>
                    <div class="content">
                        <div class="textlist">
                            多媒体<br />
                            <ul>
                                <li><a href="developing_13.html">Audio/Video Format Support</a>
                                <li><a href="developing_131.html">DRM</a>
                                <li><a href="developing_132.html">Multimedia App</a>
                                <li><a href="developing_133.html">●Streaming</a>
                            </ul>
                        </div>
                        <h3 class="title">Streaming<span><a href="index.html">返回首页&gt;</a></span></h3>
                        <div class="article-content">
                            <p class="MsoToc1">
                                <a href="#_Toc372545240">1 Ios和Android live
streaming简介</a>
                            </p>
                            <p class="MsoToc1">
                                <a href="#_Toc372545241">2 WP 8 和windows 8中的live
streaming</a>
                            </p>
                            <p class="MsoToc2"><a href="#_Toc372545242">2.1传统方法</a></p>
                            <p class="MsoToc3"><a href="#_Toc372545243">2.1.1 打开媒体</a></p>
                            <p class="MsoToc3"><a href="#_Toc372545244">2.1.2 状态管理</a></p>
                            <p class="MsoToc3"><a href="#_Toc372545245">2.1.3 缓冲区管理</a></p>
                            <p class="MsoToc2"><a href="#_Toc372545246">2.2 Player Framework</a></p>
                            <p class="MsoToc3"><a href="#_Toc372545247">2.2.1 Windows 8</a></p>
                            <p class="MsoToc3">
                                <a href="#_Toc372545248">2.2.2 Windows phone
8</a>
                            </p>
                            <p class="MsoToc3"><a href="#_Toc372545249">2.2.3 Windows 和windows phone中的不同</a></p>
                            <p>&nbsp;</p>
                            <h1><a name="_Toc372545240">1 Ios和Android live streaming简介</a></h1>
                            <p>
                                Ios的HTTP Live
Streaming 可以让你通过http协议从一个web服务器发送音视频到你的ios设备上包括iPhone,
iPad, iPod touch, and Apple TV。HTTP Live Streaming 支持实时广播和预录制的内容。HTTP Live
Streaming 支持多种不同bit率的流, 客户端软件，可以智能化切换流随着网络带宽的变化。 HTTP Live
Streaming 还提供基于https的媒体加密和用户鉴权，让出版商保护他们的产品。
                            </p>
                            <p class="imgp">
                                <img width="554" height="341" id="图片 1"
                                    src="images/developing_133/image001.jpg" alt="../art/trasnsport_stream.jpg">对于android 在http和rtsp上的steaming,这里有一些额外的要求：
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
对于3GPP和MPEG-4的容器, moov atoms必须先于任何 mdat atoms，也必须成功 ftyp atoms。
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
对于3GPP,
MPEG-4, 和WebM 容器, 对应同一时间偏移的音视频不能超过500kb。为了尽量减少此音频/视频漂移，考虑交错的音频和视频在更小的区块内。
                            </p>
                            <h1><a name="_Toc372545241">2 WP 8 和windows 8中的live streaming</a></h1>
                            <p>微软为媒体播放提供了多种方法，在微软提供Player Framework之前，开发一个具有媒体播放的应用并不容易，开发人员需要支持自适应流、字幕、广告标准集成、DVR式播放控制，以及其他功能。Player Framework是微软提供的一个播放器，开发者可以在其基础上继续进行开发而不用处理媒体播放的细节问题，能够极大的提高开发效率。</p>
                            <p>
                                以下首先介绍Player Framework出现之前的开发方式和相关技术，然后介绍Player
Framework及其使用方法。
                            </p>
                            <h2><a name="_Toc372545242">2.1传统方法</a></h2>
                            <h3><a name="_Toc372545243">2.1.1 </a><a
                                href="javascript:void(0)" title="单击以折叠。双击以全部折叠。">打开媒体</a></h3>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                当&nbsp;<a
                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>&nbsp;对象传递给&nbsp;<a
                                        href="http://msdn.microsoft.com/zh-cn/library/system.windows.controls.mediaelement.setsource(v=vs.95).aspx">MediaElement.SetSource</a>&nbsp;方法时，<a
                                            href="http://msdn.microsoft.com/zh-cn/library/system.windows.controls.mediaelement(v=vs.95).aspx">MediaElement</a>&nbsp;将其状态更改为&nbsp;<a
                                                href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediaelementstate(v=vs.95).aspx">Opening</a>&nbsp;并调用<a
                                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.openmediaasync(v=vs.95).aspx">MediaStreamSource.OpenMediaAsync</a>&nbsp;方法。&nbsp;<a
                                                        href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>&nbsp;执行应响应通过调用&nbsp;<a
                                                            href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.reportopenmediacompleted(v=vs.95).aspx">ReportOpenMediaCompleted</a>&nbsp;来响应（一旦它可将媒体描述为
Silverlight）。
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>媒体的描述中必须包括以下信息：</p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
持续时间
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
无论媒体是否支持查找。
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
受保护的内容，数字版权管理元数据需要找到适当的许可证。
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>说明也将包含一个或多个流有关的信息。&nbsp;每个流的说明必须包含以下信息：</p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
编解码器的标识。
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
一组称为编解码器私有数据的字节，将会初始化该编解码器。
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>如果媒体有视频流，该流的描述也必须包含以下信息：</p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
原始编码图像的宽度和高度。
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                这一信息通过&nbsp;<a
                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.reportopenmediacompleted(v=vs.95).aspx">MediaStreamSource.ReportOpenMediaCompleted</a>&nbsp;方法传递给
Silverlight。&nbsp;<a
    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.reportopenmediacompleted(v=vs.95).aspx">ReportOpenMediaCompleted</a>&nbsp;方法采用以下属性：
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
描述媒介的特定属性和值的字典。
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
为视频和音频同时收集&nbsp;<a
    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamdescription(v=vs.95).aspx">MediaStreamDescription</a>&nbsp;目标。&nbsp;由特定属性和值的字典创建的每个对象传递上述流的信息。
                            </p>
                            <p class="MsoListParagraph" style='margin-left: 21.0pt; text-indent: -21.0pt'>
                                l&nbsp;
视频
CodecPrivateData
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                视频编解码器由与&nbsp;<a
                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamattributekeys(v=vs.95).aspx">MediaStreamAttributeKeys.VideoFourCC</a>&nbsp;一起存储的一个四字符代码来标识。&nbsp;编解码器初始化字节作为 base16 编码的字符串存储在&nbsp;<a
                                        href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamattributekeys(v=vs.95).aspx">MediaStreamAttributeKeys.CodecPrivateData</a>。&nbsp;每个编码解码器的详细信息如下：
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'><b>H.264</b></p>
                            <table>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            VideoFourCC
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            &quot;H264&quot;
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            CodecPrivateData
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            Base16 编码格式的字符串：
                                        </p>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            0x00000001&nbsp;<em>SequenceParameterSet</em>&nbsp;0x00000001&nbsp;<em>PictureParameterSet</em>
                                        </p>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            有关启动代码、序列参数设置 (SPS) 和图片参数设置
  （PPS） 格式的详细信息，请参见&nbsp;<a
      href="http://go.microsoft.com/fwlink/%20%e5%90%97%ef%bc%9fLinkId%20=%20216760">ISO/IEC-14496-10</a>。
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            CodecPrivateDate 示例：
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            640 X 360 @ 1Mbps 的示例
                                        </p>
                                        <pre>&quot;00000001674D401E965201405FF2E020100000000168EF3880&quot;</pre>
                                    </td>
                                </tr>
                            </table>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'><b>VC-1</b><b>：高级配置文件</b></p>
                            <table>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            VideoFourCC
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            &quot;WVC1&quot;
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            CodecPrivateData
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            Base16 编码格式的字符串：
                                        </p>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            <em>ASFBindingByte</em>&nbsp;0x0000010F&nbsp;<em>SequenceLayer</em>&nbsp;0x0000010E&nbsp;<em>EntryPointLayer</em>
                                        </p>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            SequenceLayer 和 EntryPointLayer，封装（填充字节）的表单。&nbsp;开始编解码器后缀、序列图层和入口点图层的格式的详细信息，请参阅 VC-1。&nbsp;有关 ASFBinding 字体格式的详细信息，请参见&nbsp;<a href="http://go.microsoft.com/fwlink/?LinkId=216761">ASF</a>。
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            CodecPrivateDate 示例：
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            1280 X 720 @ 2.436Mbps 的示例
                                        </p>
                                        <pre>&quot;250000010FD3BE27F1678A27F859E80450824A56DCECC00000010E5A67F840&quot;</pre>
                                    </td>
                                </tr>
                            </table>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'><b>VC-1</b><b>：主要和简单的配置文件</b></p>
                            <table>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            VideoFourCC
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            &quot;WMV3&quot;
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            CodecPrivateData
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            Base16 编码格式的字符串：
                                        </p>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            0x0000010F&nbsp;<em>SequenceLayer</em>
                                        </p>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            SequenceLayer 是封装（填充字节）的表单。&nbsp;有关启动编码器后缀和序列图层格式的详细信息，请参见&nbsp;<a href="http://store.smpte.org/product-p/st%200421-2006.htm">VC 1</a>。
                                        </p>
                                    </td>
                                </tr>
                            </table>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'><b>MPEG - 4 </b><b>第 2 部分： 简单 &amp; 高级配置文件</b></p>
                            <table>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            VideoFourCC
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            &quot;MP43&quot;
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            CodecPrivateData
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            没有所需的 CodecPrivateData
                                        </p>
                                    </td>
                                </tr>
                            </table>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'><b>Windows Media Video 7 </b><b>到 9</b></p>
                            <table>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            VideoFourCC
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            &quot;WMVA&quot;
                                        </p>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            参见 VC-1 高级配置文件。
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            VideoFourCC
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            &quot;WMV2&quot;
                                        </p>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            主要和简单的配置文件，请参阅 VC-1。
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            VideoFourCC
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            &quot;WMV1&quot;
                                        </p>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            主要和简单的配置文件，请参阅 VC-1。
                                        </p>
                                    </td>
                                </tr>
                            </table>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'><b>RGBA</b></p>
                            <table>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            VideoFourCC
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            &quot;RGBA&quot;
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            CodecPrivateData
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            没有所需的 CodecPrivateData。
                                        </p>
                                    </td>
                                </tr>
                            </table>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'><b>YV12</b></p>
                            <table>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            VideoFourCC
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            &quot;YV12&quot;
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            CodecPrivateData
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            没有所需的 CodecPrivateData
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p>
                                            <b>
                                                <img border="0" width="1" height="1" id="图片 4"
                                                    src="images/developing_133/image002.gif" alt="注意">&nbsp;</b><strong>说明：</strong>
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            对于 Windows 开发人员：Windows 编解码器上的 MSDN 文档可参阅&nbsp;<b>VIDEOINFOHEADER</b>，&nbsp;<b>VIDEOINFOHEADER2</b>，&nbsp;<b>MPEG2VIDEOINFO</b>或类似的结构。&nbsp;Silverlight 所使用的 CodecPrivateData 对应的末尾追加的可变长度数据。
                                        </p>
                                    </td>
                                </tr>
                            </table>
                            <p class="MsoListParagraph" style='margin-left: 21.0pt; text-indent: -21.0pt'>
                                l&nbsp;
音频
CodecPrivateData
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                音频编码解码器使用&nbsp;<a
                                    href="http://msdn.microsoft.com/en-us/library/dd757720%20%ef%bc%88VS.85%ef%bc%89.aspx">WAVEFORMATEX</a>&nbsp;结构被标识和初始化。&nbsp;在某些情况下，额外的数据遵循&nbsp;WAVEFORMATEX&nbsp;结构。&nbsp;在其他情况下，WAVEFORMATEX&nbsp;结构是一个更大的结构的一部分。&nbsp;在所有情况下，结构和其后面的数据一起转换成
little-endian base16 编码的字符串并与<a
    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamattributekeys(v=vs.95).aspx">MediaStreamAttributeKeys.CodecPrivateData</a>&nbsp;存储在一起。
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                CodecPrivateData
中的前 16 位总是相对应&nbsp;WAVEFORMATEX&nbsp;结构，wFormatTag&nbsp;中的第一个成员。&nbsp;此值用于标识编码解码器并通知
Silverlight 剩余的数据如何被解释。&nbsp;Windows
平台 SDK 头文件 mmreg.h 包含许多如下所述枚举和结构。
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>每个编码解码器的详细信息如下：</p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'><b>AAC (ISO </b><b>高级音频编码)</b></p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                以下是用于
Silverlight 桌面的 AAC 推荐格式和 Silverlight
for Windows Phone：
                            </p>
                            <table>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            wfx.wFormatTag
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            0XFF （WAVE_FORMAT_RAW_AAC1）
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            CodecPrivateData
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            WAVEFORMATEX 结构后跟 AudioSpecificConfig 数据。
                                        </p>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            AudioSpecificConfig 结构描述在&nbsp;<a href="http://go.microsoft.com/fwlink/?LinkId=183694">ISO/IEC-14496-3</a>
                                        </p>
                                    </td>
                                </tr>
                            </table>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                下面的示例演示 48kHz 立体声内容的 HE-AAC v2 的
CodecPrivateData（启用 SBR 和 PS）。
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>&quot;FF000100C05D0000E02E0000040010000500130856E598&quot;</p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                下面的示例演示 48kHz 立体声的 96kbps
AAC-LC 的
CodecPrivateData：
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>&quot;FF00020080BB0000E02E00000400100002001190&quot;</p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                以下是
Silverlight for Windows Phone AAC 推荐格式:
                            </p>
                            <table>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            wfx.wFormatTag
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            0X1610 (WAVE_FORMAT_MPEG_HEAAC)
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            CodecPrivateData
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            HEAACWAVEFORMAT 结构后跟 AudioSpecificConfig 数据
                                        </p>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            AudioSpecificConfig 结构描述在&nbsp;<a href="http://go.microsoft.com/fwlink/?LinkId=183694">ISO/IEC-14496-3</a>
                                        </p>
                                    </td>
                                </tr>
                            </table>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                下面的示例演示 48kHz 立体声内容的 HE-AAC v2 的
CodecPrivateData（启用 SBR 和 PS）：
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>&quot;10160100C05D0000E02E00000400100011000000FE000000000000000000130856E598&quot;</p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>以下是被弃用的 AAC 格式：</p>
                            <table>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            wfx.wFormatTag
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            0X1601 (WAVE_FORMAT_MPEG_RAW_AAC)
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            CodecPrivateData
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            WAVEFORMATEX 结构
                                        </p>
                                    </td>
                                </tr>
                            </table>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                关于他行政协调会，在
WAVEFORMATEX 的
nSamplesPerSecond 字段应该是 pre-SBR (光谱波段复制） 和
WAVEFORMATEX 中的 nChannels 字段应预 PS （参数立体声）。
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                WMA
(Windows Media Audio)
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                下表显示&nbsp;<b>Windows
                                </b><b>媒体音频</b><b> V3</b>&nbsp;的编解码器信息。
                            </p>
                            <table>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            wfx.wFormatTag
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            0x162 (WAVE_FORMAT_WMAUDIO3)
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            CodecPrivateData
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            WMAUDIO3WAVEFORMAT 结构
                                        </p>
                                    </td>
                                </tr>
                            </table>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                下面的示例演示一种 44.1kHz 立体声的 Windows
Media Audio V3 CodecPrivateData：
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>&quot;6201020044AC0000451F0000CF05100012001000030000000000000000000000E00042C0&quot;</p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                下表显示&nbsp;<b>Windows
                                </b><b>媒体音频</b><b> V2</b>&nbsp;的编解码器信息。
                            </p>
                            <table>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            wfx.wFormatTag
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            0x161 (WAVE_FORMAT_WMAUDIO2)
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            CodecPrivateData
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            WMAUDIO2WAVEFORMAT 结构
                                        </p>
                                    </td>
                                </tr>
                            </table>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>下表显示&nbsp;<strong>Windows </strong><strong>媒体音频 V1</strong>&nbsp;的编解码器信息。</p>
                            <table>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            wfx.wFormatTag
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            0X160 (WAVE_FORMAT_MSAUDIO1)
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            CodecPrivateData
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            MSAUDIO1WAVEFORMAT 结构
                                        </p>
                                    </td>
                                </tr>
                            </table>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'><b>MP3 (ISO MPEG-1 Layer III)</b></p>
                            <table>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            wfx.wFormatTag
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            0X55 (WAVE_FORMAT_MPEGLAYER3)
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            CodecPrivateData
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            <a
                                                href="http://msdn.microsoft.com/en-us/library/dd390710(VS.85).aspx">MPEGLAYER3WAVEFORMAT</a>&nbsp;结构
                                        </p>
                                    </td>
                                </tr>
                            </table>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>有关 MP3 的详细信息，请参见&nbsp;<a href="http://go.microsoft.com/fwlink/?LinkId=216762">ISO/IEC 13818-3</a>。</p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                以下示例显示 MP3 (ISO
MPEG 1 层 III)
CodecPrivateData 22.05 kHz 立体声 80 kbps 522 个字节，每个框架，每个块一帧时：
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>&quot;550002002256000010270000010000000C000100000000000A0201000000&quot;</p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'><b>PCM/WAV</b></p>
                            <table>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            wfx.wFormatTag
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            1 (WAVE_FORMAT_PCM)
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            CodecPrivateData
                                        </p>
                                    </td>
                                    <td>
                                        <p style='margin-top: 0cm; margin-right: 7.5pt; margin-bottom: 0cm; margin-left: 7.5pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                            WAVEFORMATEX 没有特定编码解码器的数据结构。
                                        </p>
                                    </td>
                                </tr>
                            </table>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                下面的示例演示一种 44.1kHz 立体声以 96 kbps 速率的 PCM/WAV
CodecPrivateData：
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>&quot;0100020080BB0000E02E0000040010000000&quot;</p>
                            <h3><a name="_Toc372545244">2.1.2 </a><a
                                href="javascript:void(0)" title="单击以折叠。双击以全部折叠。">状态管理</a></h3>
                            <h4>2.1.2.1 媒体状态</h4>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                虽然&nbsp;<a
                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.controls.mediaelement(v=vs.95).aspx">MediaElement</a>有&nbsp;<a
                                        href="http://msdn.microsoft.com/zh-cn/library/system.windows.controls.mediaelement.currentstate(v=vs.95).aspx">MediaElement.CurrentState</a>&nbsp;定义的明确的状态，<a
                                            href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>&nbsp;对象并没有。&nbsp;相反，<a
                                                href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>&nbsp;的状态是由唤醒的方法来确定的。&nbsp;例如，如果已调用&nbsp;<a
                                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>的&nbsp;<a
                                                        href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.seekasync(v=vs.95).aspx">SeekAsync</a>&nbsp;方法并且其还未通过调用&nbsp;<a
                                                            href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.reportseekcompleted(v=vs.95).aspx">ReportSeekCompleted</a>&nbsp;而响应，则将其视为处于“求”状态。&nbsp;一般情况下，<a
                                                                href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>&nbsp;通常执行以下活动之一：
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
“开启”
                            </p>
                            <p style='margin-top: 0cm; margin-right: 0cm; margin-bottom: 0cm; margin-left: 36.0pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                <a
                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.controls.mediaelement(v=vs.95).aspx">MediaElement</a>&nbsp;已调用了&nbsp;<a
                                        href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.openmediaasync(v=vs.95).aspx">OpenMediaAsync</a>，但&nbsp;<a
                                            href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>&nbsp;执行未以&nbsp;<a
                                                href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.reportopenmediacompleted(v=vs.95).aspx">ReportOpenMediaCompleted</a>&nbsp;进行回应。
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
“查找”
                            </p>
                            <p style='margin-top: 0cm; margin-right: 0cm; margin-bottom: 0cm; margin-left: 36.0pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                <a
                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.controls.mediaelement(v=vs.95).aspx">MediaElement</a>&nbsp;已调用了&nbsp;<a
                                        href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.seekasync(v=vs.95).aspx">SeekAsync</a>，但&nbsp;<a
                                            href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>&nbsp;执行未以&nbsp;<a
                                                href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.reportseekcompleted(v=vs.95).aspx">ReportSeekCompleted</a>&nbsp;进行回应。
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
“缓存”
                            </p>
                            <p style='margin-top: 0cm; margin-right: 0cm; margin-bottom: 0cm; margin-left: 36.0pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                <a
                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.controls.mediaelement(v=vs.95).aspx">MediaElement</a>&nbsp;已为媒体流之一调用了&nbsp;<a
                                        href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.getsampleasync(v=vs.95).aspx">GetSampleAsync</a>，然后&nbsp;<a
                                            href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>&nbsp;将以&nbsp;<a
                                                href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.reportgetsampleprogress(v=vs.95).aspx">ReportGetSampleProgress</a>&nbsp;进行响应。
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
“流式”
                            </p>
                            <p style='margin-top: 0cm; margin-right: 0cm; margin-bottom: 0cm; margin-left: 36.0pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                <a
                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>&nbsp;不回应&nbsp;<a
                                        href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.reportgetsampleprogress(v=vs.95).aspx">ReportGetSampleProgress</a>。&nbsp;换言之，一旦示例可用，<a
                                            href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>&nbsp;将使用对<a
                                                href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.reportgetsamplecompleted(v=vs.95).aspx">ReportGetSampleCompleted</a>&nbsp;的调用来响应&nbsp;<a
                                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.getsampleasync(v=vs.95).aspx">GetSampleAsync</a>&nbsp;调用。
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
&quot;mediaEnded&quot;
                            </p>
                            <p style='margin-top: 0cm; margin-right: 0cm; margin-bottom: 0cm; margin-left: 36.0pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                <a
                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>&nbsp;通知了&nbsp;<a
                                        href="http://msdn.microsoft.com/zh-cn/library/system.windows.controls.mediaelement(v=vs.95).aspx">MediaElement</a>最终示例为所有流而传递。&nbsp;这通过报告对应于&nbsp;<a
                                            href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.getsampleasync(v=vs.95).aspx">GetSampleAsync</a>&nbsp;的特殊结尾流样本来做到的。
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
“关闭”
                            </p>
                            <p style='margin-top: 0cm; margin-right: 0cm; margin-bottom: 0cm; margin-left: 36.0pt; margin-bottom: .0001pt; line-height: 13.5pt'>
                                已调用&nbsp;<a
                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.closemedia(v=vs.95).aspx">CloseMedia</a>。
                            </p>
                            <h4>2.1.2.2 流状态</h4>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                <a
                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>&nbsp;实现可能会发现它同样有助于维护每个流状态。&nbsp;例如，应用程序可能会停止下载音频，如果其音频缓冲区队列已满。
                            </p>
                            <h4>2.1.2.3 同步</h4>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                <a
                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.controls.mediaelement(v=vs.95).aspx">MediaElement</a>&nbsp;一次性只调用一个&nbsp;<a
                                        href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>方法。&nbsp;因此，<a
                                            href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.seekasync(v=vs.95).aspx">SeekAsync</a>&nbsp;请求不会在同一时间到达&nbsp;<a
                                                href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.getsampleasync(v=vs.95).aspx">GetSampleAsync</a>&nbsp;请求，也不会同时达到两个&nbsp;<a
                                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.getsampleasync(v=vs.95).aspx">GetSampleAsync</a>&nbsp;请求。&nbsp;然而，仍然存在开发人员必须考虑的一些情况&nbsp;<a
                                                        href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>：
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>查找</p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
在桌面
Silverlight 中，在已完成所有优秀示例请求前，将不会传递&nbsp;<a
    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.seekasync(v=vs.95).aspx">SeekAsync</a>。&nbsp;一个解决方案是第二次报告前面的示例。
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
在
Silverlight for Windows Phone 中，当优秀示例请求被挂起时，<a
    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.seekasync(v=vs.95).aspx">SeekAsync</a>&nbsp;请求将被传递。&nbsp;不过，当该示例完成时，Silverlight
for Windows Phone 会错误地将其扔掉。&nbsp;如果该示例是一个密钥帧，它可能需要第二次报告示例。
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>缓冲转换</p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
在
Silverlight for Windows Phone 中，调用<a
    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.reportgetsampleprogress(v=vs.95).aspx">ReportGetSampleProgress</a>&nbsp;不会阻止随后&nbsp;<a
        href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.getsampleasync(v=vs.95).aspx">GetSampleAsync</a>&nbsp;到达的调用。&nbsp;缓冲是媒体状态，不是流状态。&nbsp;调用任何流的&nbsp;<a
            href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.reportgetsamplecompleted(v=vs.95).aspx">ReportGetSampleCompleted</a>&nbsp;将导致&nbsp;<a
                href="http://msdn.microsoft.com/zh-cn/library/system.windows.controls.mediaelement(v=vs.95).aspx">MediaElement</a>&nbsp;退出缓冲。&nbsp;因此，在对所有流完成缓冲前<a
                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>&nbsp;不应填写任何流的示例。
                            </p>
                            <h3><a name="_Toc372545245">2.1.3 </a><a
                                href="javascript:void(0)" title="单击以折叠。双击以全部折叠。">缓冲区管理</a></h3>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                创建一个<a
                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>&nbsp;最具挑战性任务之一是实现缓冲区管理逻辑。&nbsp;可怜的逻辑可能导致过多条目进入缓冲状态和
post-starvation 音频/视频 (AV) 同步问题。
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                <a
                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>&nbsp;实现必须考虑到两个缓冲区：
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                1. 管道保持的缓冲区。&nbsp;此缓冲区包含所有由还未呈现的&nbsp;<a
                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>&nbsp;报告的示例。
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                2. 通过&nbsp;<a
                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>&nbsp;实现本身维护缓冲区。&nbsp;<a
                                        href="http://msdn.microsoft.com/zh-cn/library/system.windows.controls.mediaelement(v=vs.95).aspx">MediaElement</a>&nbsp;处于缓冲状态时（例如，当管道不排水示例时），此缓冲区可能很深。
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                <a
                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>&nbsp;实现可查看如下图所示：
                            </p>
                            <p class="imgp">
                                <img border="0" width="683" height="163" id="图片 2"
                                    src="images/developing_133/image003.png" alt="MediaStreamSource 实现">
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>在正常播放期间：</p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>1. 从网络到达媒体字节为单位）。&nbsp;这些字节追加到 XAP 管理媒体的缓冲区，其中可能包含几秒的内容。</p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>2. XAP 解析出单个音频和视频的样本，并将缓冲区引用添加到音频或视频的队列。</p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                3. XAP 回应
Silverlight 示例请求，将媒体缓冲区的样品转移到
Silverlight 的管道缓冲区。&nbsp;XAP 缓冲区不再需要记住该示例。
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>4. 该示例被显示给用户。&nbsp;时间是该示例的时间戳所指定的。</p>
                            <h4>2.1.3.1 管道缓冲区</h4>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                Silverlight
管道缓冲区的大小都将受&nbsp;<a
    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.audiobufferlength(v=vs.95).aspx">MediaStreamSource.AudioBufferLength</a>&nbsp;属性的影响（以毫秒为单位）。&nbsp;<a
        href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>&nbsp;类忽略<a
            href="http://msdn.microsoft.com/zh-cn/library/system.windows.controls.mediaelement.bufferingtime(v=vs.95).aspx">MediaElement.BufferingTime</a>。&nbsp;开发人员可以为&nbsp;<a
                href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.audiobufferlength(v=vs.95).aspx">AudioBufferLength</a>&nbsp;选择性地使用默认值，其中为 1000 （一秒钟），或将属性设置为在<a
                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.reportopenmediacompleted(v=vs.95).aspx">ReportOpenMediaCompleted</a>&nbsp;之前的不同值。
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                如何将&nbsp;<a
                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.audiobufferlength(v=vs.95).aspx">AudioBufferLength</a>&nbsp;属性在不同的平台之间解释：
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
在桌面
Silverlight 中，音频流的缓冲区深度（根据时间测量），是通过&nbsp;<a
    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.audiobufferlength(v=vs.95).aspx">AudioBufferLength</a>&nbsp;设置的。
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
在
Silverlight for Windows Phone 中，频和视频缓冲区的深度都受&nbsp;<a
    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.audiobufferlength(v=vs.95).aspx">AudioBufferLength</a>&nbsp;的影响，但以字节为单位调整其大小（假设在差压缩率情况下）。&nbsp;为此，有效缓冲深度在实践中可以更深。
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                计算管道流缓冲区的当前深度的最准确和可靠的方式就是要从该流中最后一次报告示例的时间戳减去&nbsp;<a
                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.controls.mediaelement.position(v=vs.95).aspx">MediaElement.Position</a>，然后添加持续时间。
                            </p>
                            <h4>2.1.3.2 匮乏</h4>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>匮乏发生当：</p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
                                <a
                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.controls.mediaelement(v=vs.95).aspx">MediaElement</a>&nbsp;未放在&nbsp;<a
                                        href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediaelementstate(v=vs.95).aspx">Buffering</a>&nbsp;状态中，因此结果将导致对&nbsp;<a
                                            href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.reportgetsampleprogress(v=vs.95).aspx">ReportGetSampleProgress</a>&nbsp;的调用。
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
所有在一个流的管道缓冲区中的样本已经被呈现。
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>如何处理这种情况取决于平台：</p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
在桌面
Silverlight 中，<a
    href="http://msdn.microsoft.com/zh-cn/library/system.windows.controls.mediaelement(v=vs.95).aspx">MediaElement</a>保留在&nbsp;<a
        href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediaelementstate(v=vs.95).aspx">Playing</a>&nbsp;状态中，但&nbsp;<a
            href="http://msdn.microsoft.com/zh-cn/library/system.windows.controls.mediaelement.position(v=vs.95).aspx">Position</a>&nbsp;停止前调。
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
在
Silverlight for Windows Phone 中，<a
    href="http://msdn.microsoft.com/zh-cn/library/system.windows.controls.mediaelement(v=vs.95).aspx">MediaElement</a>&nbsp;会保持&nbsp;<a
        href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediaelementstate(v=vs.95).aspx">Playing</a>&nbsp;状态，但&nbsp;<a
            href="http://msdn.microsoft.com/zh-cn/library/system.windows.controls.mediaelement.position(v=vs.95).aspx">Position</a>&nbsp;继续前进。&nbsp;样本到达时，如果这位置预先有过去它们的时间戳，则它们可能会被丢弃。&nbsp;在某些情况下，播放继续进行时，可能会出现 AV 同步问题。&nbsp;这种行为可以更改以匹配后续版本中的桌面
Silverlight。
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                一个成功的&nbsp;<a
                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>&nbsp;实现确保
Silverlight 管线永不缺乏。&nbsp;这通过监视每个管道缓冲区的深度来完成。&nbsp;如果视频或音频的管道缓冲区为空，则&nbsp;<a
    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>&nbsp;实现应执行以下操作：
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
通过调用&nbsp;<a
    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.reportgetsampleprogress(v=vs.95).aspx">ReportGetSampleProgress</a>&nbsp;回应&nbsp;<a
        href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.getsampleasync(v=vs.95).aspx">GetSampleAsync</a>&nbsp;请求。&nbsp;此更新进度的水平，并允许&nbsp;<a
            href="http://msdn.microsoft.com/zh-cn/library/system.windows.controls.mediaelement(v=vs.95).aspx">MediaElement</a>过渡到&nbsp;<a
                href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediaelementstate(v=vs.95).aspx">Buffering</a>。
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
停止任何流上正在完成的样本，直到 XAP 的媒体缓冲区重建。
                            </p>
                            <p style='margin-bottom: 0cm; margin-bottom: .0001pt; line-height: 13.5pt'>
                                重新生成 XAP 媒体缓冲区后，<a
                                    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource(v=vs.95).aspx">MediaStreamSource</a>&nbsp;实现应执行以下操作：
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
调用&nbsp;<a
    href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediastreamsource.reportgetsampleprogress(v=vs.95).aspx">ReportGetSampleProgress</a>&nbsp;1.0 来表示缓冲水平已经达到 100%。
                            </p>
                            <p style='margin-left: 36.0pt; text-indent: -18.0pt'>
                                ●
开始完成示例以便允许&nbsp;<a
    href="http://msdn.microsoft.com/zh-cn/library/system.windows.controls.mediaelement(v=vs.95).aspx">MediaElement</a>状态从&nbsp;<a
        href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediaelementstate(v=vs.95).aspx">Buffering</a>&nbsp;过渡到&nbsp;<a
            href="http://msdn.microsoft.com/zh-cn/library/system.windows.media.mediaelementstate(v=vs.95).aspx">Playing</a>。
                            </p>
                            <h2>&nbsp;<a name="_Toc372545246">2.2 Player Framework</a></h2>
                            <p>
                                Player
Framework是一款Open source的Video player framework，让开发者在设计多媒体播放器时可以更有效率，例如加入字幕、DVR式播放、设定播放版面Style等等。目前Player Framework支持多种平台，如Silverlight、HTML5、WP、Xbox、Windows 8。要留意的是，Player Framework for WP8是由Win8版本上发展而来，未必可以完全加入到WP7.x的Apps中。利用Player Framework，您可以很方便的使自己的应用具有流畅的音视频播放功能。
                            </p>
                            <h3><a name="_Toc372545247">2.2.1 Windows 8</a></h3>
                            <p>以下以基于XAML的应用商店应用为例介绍Player Framework使用方法。</p>
                            <p>1.安装&nbsp;Visual Studio Extension SDK (Microsoft.PlayerFramework.vsix)</p>
                            <p>2.创建C#空白模版的windows应用商店应用</p>
                            <p>3.为您的应用程序添加Microsoft Player Framework引用</p>
                            <p>
                                <b>
                                    <img border="0" width="554" height="249"
                                        id="图片 3" src="images/developing_133/image004.png"></b>
                            </p>
                            <p>4.在xaml文件中添加&nbsp;PlayerFramework命名空间</p>
                            <p>
                                xmlns:mmppf=&quot;using:Microsoft.PlayerFramework&quot;
                            </p>
                            <p>5.&nbsp;为页面添加MediaPlayer控件，并设置source属性</p>
                            <pre>&lt;Grid Background=&quot;{StaticResource ApplicationPageBackgroundThemeBrush}&quot;&gt;</pre>
                            <pre>&nbsp;&nbsp;&nbsp; &lt;mmppf:MediaPlayer Source=&quot;http://smf.blob.core.windows.net/samples/videos/bigbuck.mp4&quot;/&gt;</pre>
                            <pre>&lt;/Grid&gt;</pre>
                            <p>如下是为应用程序添加Smooth Streaming支持的方法：</p>
                            <p>
                                1.安装&nbsp;Visual Studio Extension
SDK for the&nbsp;Smooth Streaming Client,<a
    href="http://visualstudiogallery.msdn.microsoft.com/04423d13-3b3e-4741-a01c-1ae29e84fea6">点击此处下载</a>
                            </p>
                            <p>
                                2.通过References
--&gt; Microsoft--&gt; Extensions，为应用添加Microsoft Smooth Streaming Client SDK for Windows 8和Microsoft Visual C++ Runtime Package引用
                            </p>
                            <p>
                                3.为应用添加Microsoft Player Framework Adaptive
Streaming Plugin引用
                            </p>
                            <p class="imgp">
                                <img border="0" width="554" height="239" id="图片 5"
                                    src="images/developing_133/image005.png">
                            </p>
                            <p>4.修改&nbsp;MediaPlayer控件xaml，设置其source属性为一个有效的smooth streaming的url，并且添加plugins集合添加Adaptive plugin</p>
                            <pre>xmlns:adaptive=&quot;using:Microsoft.PlayerFramework.Adaptive&quot;</pre>
                            <pre
                                style='line-height: 14.25pt; vertical-align: baseline'>&lt;mmppf:MediaPlayer Source=&quot;http://mediadl.microsoft.com/mediadl/iisnet/smoothmedia/Experience/BigBuckBunny_720p.ism/Manifest&quot;&gt;</pre>
                            <pre>&nbsp;&nbsp;&nbsp; &lt;mmppf:MediaPlayer.Plugins&gt;</pre>
                            <pre
                                style='line-height: 14.25pt; vertical-align: baseline'>&nbsp;&nbsp;&nbsp; &lt;adaptive:AdaptivePlugin /&gt;</pre>
                            <pre>&nbsp;&nbsp;&nbsp; &lt;/mmppf:MediaPlayer.Plugins&gt;</pre>
                            <pre>&lt;/mmppf:MediaPlayer&gt;</pre>
                            <p>
                                5.由于IIS Smooth Streaming
Client属于非托管代码，所以不能以AnyCPU来运行，必须指定为x86, x64, 或者ARM
                            </p>
                            <p class="imgp">
                                <img border="0" width="340" height="101" id="图片 6"
                                    src="images/developing_133/image006.png">
                            </p>
                            <p class="imgp">
                                <img border="0" width="554" height="345" id="图片 7"
                                    src="images/developing_133/image007.png">
                            </p>
                            <h3><a name="_Toc372545248">2.2.2 Windows phone 8</a></h3>
                            <p>
                                1.安装&nbsp;&nbsp;Visual Studio Extension SDK
(Microsoft.PlayerFramework.WP8.vsix)
                            </p>
                            <p>2.创建C# Windows phone App类型的应用</p>
                            <p>
                                <b>3.</b><b>通过</b>&nbsp;References
--&gt; Windows Phone --&gt; Extensions 为应用添加Microsoft Player Framework引用
                            </p>
                            <p class="imgp">
                                <img border="0" width="554" height="245" id="图片 8"
                                    src="images/developing_133/image008.png">
                            </p>
                            <p>4.在xaml文件中添加&nbsp;PlayerFramework命名空间</p>
                            <p>xmlns:mmppf=&quot;clr-namespace:Microsoft.PlayerFramework;assembly=Microsoft.PlayerFramework&quot;</p>
                            <p>5.为获得更好的用户体验，推荐做以下设置：</p>
                            <p>
                                ●
移除默认添加的LayoutRoot Grid 标签
                            </p>
                            <p>
                                ●
设置shell:SystemTray.IsVisible=&quot;False&quot;
                            </p>
                            <p>
                                ●
设置SupportedOrientations=&quot;Landscape&quot;
Orientation=&quot;Landscape&quot;
                            </p>
                            <p>6.添加MediaPlayer&nbsp;控件，并设置source为有效的url</p>
                            <p>
                                &lt;Grid x:Name=&quot;LayoutRoot&quot; Background=&quot;Transparent&quot;&gt;
                            </p>
                            <p>
                                &nbsp;&nbsp;&nbsp; &lt;mmppf:MediaPlayer Source=&quot;http://smf.blob.core.windows.net/samples/videos/bigbuck.mp4&quot;/&gt;
                            </p>
                            <p>
                                &lt;/Grid&gt;
                            </p>
                            <p>如下是为应用程序添加Smooth Streaming支持的方法：</p>
                            <p>
                                1.安装Microsoft Smooth Streaming Client，<a
                                    href="http://www.microsoft.com/en-us/download/details.aspx?id=29940">点击此处下载</a>
                            </p>
                            <p>
                                2.通过References --&gt; Browse为应用添加smooth streaming client引用。默认路径为C:\Program Files (x86)\Microsoft
SDKs\IIS Smooth Streaming Client\v2.0\Windows Phone
                            </p>
                            <p>
                                3.通过References --&gt; Windows Phone --&gt;
Extensions为应用添加 Microsoft Player Framework Adaptive
Streaming Player引用
                            </p>
                            <p>4.为xaml页面添加如下命名空间：</p>
                            <p>
                                xmlns:adaptive=&quot;clr-namespace:Microsoft.PlayerFramework.Adaptive;assembly=Microsoft.PlayerFramework.Adaptive&quot;
                            </p>
                            <p>5.修改MediaPlayer空间xaml，并且添加plugins集合添加Adaptive plugin</p>
                            <p>
                                &lt;Grid x:Name=&quot;LayoutRoot&quot; Background=&quot;Transparent&quot;&gt;
                            </p>
                            <p>
                                &nbsp;&nbsp;&nbsp; &lt;mmppf:MediaPlayer Source=&quot;http://ecn.channel9.msdn.com/o9/content/smf/smoothcontent/bbbwp7/big
buck bunny.ism/manifest&quot;&gt;
                            </p>
                            <p>
                                &nbsp;&nbsp;&nbsp; &lt;mmppf:MediaPlayer.Plugins&gt;
                            </p>
                            <p>
                                &nbsp;&nbsp;&nbsp;
&lt;adaptive:AdaptivePlugin /&gt;
                            </p>
                            <p>
                                &nbsp;&nbsp;&nbsp; &lt;/mmppf:MediaPlayer.Plugins&gt;
                            </p>
                            <p>
                                &nbsp;&nbsp;&nbsp; &lt;/mmppf:MediaPlayer&gt;
                            </p>
                            <p>
                                &lt;/Grid&gt;
                            </p>
                            <h3><a name="_Toc372545249">2.2.3 Windows 和windows phone中的不同</a></h3>
                            <p>
                                Windows Phone 8版本的player
framework是基于Windows 8 Xaml版的，因此您可以像在windows 8应用中那样，在windows phone应用中使用广告、设置播放器style等功能。但是，在windows phone 8和Windows 8之间还是有一些区别，如下：
                            </p>
                            <p class="MsoListParagraph" align="left" style='margin-left: 21.0pt; text-align: left; text-indent: -21.0pt'>
                                默认播放器UI不同，windows phone 8不使用默认满屏和音量控制
                            </p>
                            <p class="MsoListParagraph" align="left" style='margin-left: 21.0pt; text-align: left; text-indent: -21.0pt'>
                                为了保持与Winodws
phone中默认的播放器一致性，在Winodws phone中前进和后退按钮默认是可见的
                            </p>
                            <p class="MsoListParagraph" align="left" style='margin-left: 21.0pt; text-align: left; text-indent: -21.0pt'>
                                Windows phone只支持一种主题，windows
8支持两种主题
                            </p>
                            <p class="MsoListParagraph" align="left" style='margin-left: 21.0pt; text-align: left; text-indent: -21.0pt'>
                                Windows phone中的广告只支持一条广告的预加载
                            </p>
                            <p class="MsoListParagraph" align="left" style='margin-left: 21.0pt; text-align: left; text-indent: -21.0pt'>
                                对smooth
streaming的支持，Windows Phone 版本使用SmoothStreamingMediaElement（来自于<a
    href="http://www.microsoft.com/en-us/download/details.aspx?id=29940">IIS Smooth Streaming Client</a>），Windows 8使用&nbsp;<a
        href="http://visualstudiogallery.msdn.microsoft.com/04423d13-3b3e-4741-a01c-1ae29e84fea6">Smooth Streaming Client
SDK</a>
                            </p>
                            <p class="MsoListParagraph" align="left" style='margin-left: 21.0pt; text-align: left; text-indent: -21.0pt'>
                                Windows phone版本的DRM使用LicenseAcquirer，windows 8使用MediaProtectionManager
                            </p>
                            <p>更多参考资料参见：<a href="http://playerframework.codeplex.com/documentation">http://playerframework.codeplex.com/documentation</a></p>
                        </div>
                        <div class="textlist">
                            另三篇文章：<br />
                            <ul>
                                <li><a href="developing_13.html">Audio/Video Format Support</a>
                                <li><a href="developing_131.html">DRM</a>
                                <li><a href="developing_132.html">Multimedia App</a>
                            </ul>
                        </div>

                    </div>
                    <div class="clear"></div>
                </div>
            </div>
        </div>
        <!--End Content-->
        <div style="text-align: right" class="gotoTop"><a href="javascript:scroll(0,0)"></a></div>
        <!--Begin ProudctLinks-->
        <div class="ms-pro-links">
            <div class="grid-container clearfix">
                <div class="cam-links">
                    其它微软站点
                    <a href="http://www.microsoft.com/zh-cn/default.aspx">微软中国官方网站</a>
                    <a href="http://www.microsoft.com/zh-cn/download/default.aspx?WT.mc_id=MSCOM_zh-cn_HP_Footer_downloads" target="_blank">微软中国下载中心</a>
                    <a href="http://www.microsoftstore.com.cn?WT.mc_id=MSCOM_003" target="_blank">微软中国官方商城</a>
                    <a href="http://www.microsoft.com/china/newsletter/" target="_blank">订阅电子期刊</a>
                    <a href="https://sales.liveperson.net/hc/21661174/?cmd=file&file=visitorWantsToChat&site=21661174&byhref=1&SESSIONVAR!skill=APGC.PRC.ZH.CS.CON.PRESLS.GENERAL" target="_blank">联系微软销售代表</a>
                    <a href="http://www.microsoft.com/zh-cn/sitemap.aspx" target="_blank">网站地图</a>
                </div>
            </div>
        </div>
        <!--End ProudctLinks-->
        <!--Begin footer-->
        <div class="footer">
            <div class="grid-container">
                <img src="http://i.s-microsoft.com/global/ImageStore/PublishingImages/logos/hp/logo-type-1x.png" alt="microsoft" class="logo">
                <ul>
                    <li><a href="http://www.miibeian.gov.cn/" title="">京ICP备09042378号-6</a></li>
                    <li><a href="https://profile.microsoft.com/RegSysProfileCenter/default.aspx?lcid=2052" title="">个人信息中心</a></li>
                    <li><a href="http://support.microsoft.com/contactus/?ws=support" title="">与我们联系</a></li>
                    <li><a href="http://go.microsoft.com/fwlink/?LinkId=248681" title="">隐私权声明</a></li>
                    <li><a href="http://go.microsoft.com/?linkid=4412892" title="">使用条款</a></li>
                    <li><a href="http://www.microsoft.com/About/Legal/EN/US/IntellectualProperty/Trademarks/EN-US.aspx" title="">商标</a></li>
                    <li>&copy; 2013 Microsoft</li>
                </ul>
            </div>
        </div>
        <!--End footer-->
        <!-- Begin MDA WEDCS -->
        <script type="text/JavaScript">
            var varSegmentation = 0;
            var varClickTracking = 1;
            var varCustomerTracking = 1;
            var varAutoFirePV = 1;
            var Route = "#";
            var Ctrl = "#"
            //document.write("<script type='text/javascript' src='" + window.location.protocol + "//c.microsoft.com/ms.js'><"+"/script>");
        </script>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script type="text/javascript" src="./assets/js/script.js"></script>
        <script type="text/javascript" src="./js/siteSearch.js"></script>
        <noscript>
            <img alt="" width="1" height="1" src="http://c.microsoft.com/trans_pixel.aspx/" />
        </noscript>
        <!-- Begin MDA WEDCS -->
    </div>
</body>
</html>
